<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مشاريعنا | True Draft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: { colors: { dark: '#050505' }, fontFamily: { sans: ['Cairo', 'sans-serif'], english: ['Manrope', 'sans-serif'] } }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;700;900&family=Manrope:wght@200;300;400;500;700;800&display=swap" rel="stylesheet">
    <style>body { font-family: 'Cairo', sans-serif; } .grayscale-img { filter: grayscale(100%); transition: filter 0.5s ease; } .group:hover .grayscale-img { filter: grayscale(0%); } .animate-fade-in { animation: fadeIn 0.3s ease-in-out; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }</style>
</head>
<body class="bg-white text-black antialiased flex flex-col min-h-screen">

    <!-- Header (Integrated) -->
    <nav class="fixed top-0 w-full z-[999] bg-white/95 backdrop-blur-md border-b border-gray-100 py-4 shadow-sm transition-all duration-300">
        <div class="container mx-auto px-6 md:px-12 flex justify-between items-center">
            <a href="index.html" class="z-50 block"><img src="images/logo.png" alt="True Draft" class="h-10 md:h-12 w-auto object-contain"></a>
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="home">الرئيسية</a>
                <a href="index.html#about" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="about">عن ترو درفت</a>
                <a href="projects.html" class="text-sm font-bold uppercase text-[#C69C6D] underline decoration-2 underline-offset-4" data-i18n="projects">مشاريعنا</a>
                <a href="blog.html" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="blog">المدونة</a>
                <button onclick="openModal('careers-modal')" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="careers">التوظيف</button>
                <button onclick="openModal('contact-modal')" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="contact">تواصل معنا</button>
                <button onclick="toggleLanguage()" class="flex items-center gap-2 text-xs font-bold border-l rtl:border-l-0 rtl:border-r border-gray-300 px-4 h-5 hover:opacity-70"><span class="font-english text-base" id="lang-btn-text">EN</span></button>
            </div>
            <button onclick="toggleMenu()" class="md:hidden p-2.5 rounded-md border border-gray-200 hover:bg-gray-50 transition-all"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button>
        </div>
        <div id="mobile-menu" class="fixed inset-0 bg-white z-[5000] hidden flex-col justify-center items-center gap-8 text-center animate-fade-in w-full h-screen overflow-hidden">
            <button onclick="toggleMenu()" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 rounded-full border hover:bg-gray-100 rtl:right-auto rtl:left-6 ltr:left-auto ltr:right-6"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            <a href="index.html" class="text-2xl font-bold" data-i18n="home">الرئيسية</a>
            <a href="index.html#about" class="text-2xl font-bold" data-i18n="about">عن ترو درفت</a>
            <a href="projects.html" class="text-2xl font-bold" data-i18n="projects">مشاريعنا</a>
            <a href="blog.html" class="text-2xl font-bold" data-i18n="blog">المدونة</a>
            <button onclick="toggleMenu(); openModal('careers-modal')" class="text-2xl font-bold" data-i18n="careers">التوظيف</button>
            <button onclick="toggleMenu(); openModal('contact-modal')" class="text-2xl font-bold" data-i18n="contact">تواصل معنا</button>
            <button onclick="toggleLanguage()" class="text-xl font-english mt-8 font-bold border-2 border-current px-8 py-3 rounded-full hover:bg-black hover:text-white transition-all">EN / AR</button>
        </div>
    </nav>

    <main class="flex-grow pt-[100px] px-6 pb-20">
        <div class="container mx-auto">
            <h1 class="text-4xl font-bold mb-12 border-b pb-6" data-i18n="projects_title">مشاريعنا</h1>
            <div id="projects-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
    </main>

    <!-- Footer (Integrated) -->
    <div class="fixed bottom-8 right-8 rtl:right-8 rtl:left-auto ltr:left-8 ltr:right-auto z-[3000]">
        <a href="https://wa.me/966582226234" target="_blank" class="flex items-center justify-center w-16 h-16 bg-[#25D366] rounded-full shadow-2xl hover:scale-110 transition-transform duration-300 group">
            <svg class="w-8 h-8 text-white fill-current group-hover:animate-pulse" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
        </a>
    </div>
    <footer class="bg-black text-white py-16">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-white" data-i18n="contact_header">تواصل معنا</h2>
            <div class="flex flex-col md:flex-row justify-center gap-12 md:gap-32 mb-12">
                <div class="flex flex-col items-center">
                    <span class="text-gray-400 text-xs mb-2 font-bold uppercase tracking-widest" data-i18n="email_label">البريد الإلكتروني</span>
                    <a href="mailto:info@truedraft.com.sa" class="text-xl md:text-2xl font-english font-light hover:text-gray-300 transition-colors">info@truedraft.com.sa</a>
                </div>
                <div class="flex flex-col items-center">
                    <span class="text-gray-400 text-xs mb-2 font-bold uppercase tracking-widest" data-i18n="phone_label">اتصل بنا</span>
                    <a href="tel:0582226234" class="text-xl md:text-2xl font-english font-light hover:text-gray-300 transition-colors" dir="ltr">058 222 6234</a>
                </div>
            </div>
            <div class="flex justify-center gap-8 mb-16">
                <a href="https://tiktok.com/@truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.63 2.58-4.9 2.09-1.81 5.13-2.01 7.41-.47.23.15.42.34.61.53v4.43c-.87-.91-2.17-1.35-3.41-1.15-1.11.16-2.04.91-2.48 1.92-.76 1.76-.08 3.97 1.63 5.09.84.56 1.86.76 2.84.62 1.39-.17 2.63-1.04 3.23-2.29.35-.72.49-1.52.48-2.32v-17.2h-1.9z"/></svg></a>
                <a href="https://instagram.com/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a>
                <a href="https://linkedin.com/company/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a>
                <a href="https://x.com/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
            </div>
            <div class="border-t border-gray-900 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-gray-600 text-xs font-bold" data-i18n="rights">جميع الحقوق محفوظة لشركة True Draft © 2025</p>
                <div class="flex gap-6">
                    <button onclick="openModal('privacy-modal')" class="text-gray-500 text-xs hover:text-white transition-colors" data-i18n="privacy">سياسة الخصوصية</button>
                    <button onclick="openModal('terms-modal')" class="text-gray-500 text-xs hover:text-white transition-colors" data-i18n="terms">الشروط والأحكام</button>
                </div>
            </div>
        </div>
    </footer>
    <!-- Modals (Integrated - ALL MODALS) -->
    <div id="careers-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-2xl bg-white border border-gray-200 shadow-2xl relative p-8 md:p-12 rounded-xl">
                <button onclick="closeModal('careers-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-3xl font-bold mb-2 text-center" data-i18n="careers_title">انضم إلى فريقنا</h2>
                <p class="text-center text-gray-500 mb-8 text-sm" data-i18n="careers_subtitle">املأ النموذج أدناه وسيتم إرسال طلبك مباشرة إلى فريق الموارد البشرية.</p>
                <form onsubmit="submitCareerForm(event)" class="space-y-5">
                    <div>
                        <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_name">الاسم الكامل</label>
                        <input type="text" id="career-name" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_phone">رقم الجوال</label>
                            <input type="tel" id="career-phone" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md" dir="ltr">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_email">البريد الإلكتروني</label>
                            <input type="email" id="career-email" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md" dir="ltr">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_position">المسمى الوظيفي</label>
                        <select id="career-position" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md">
                            <option value="" disabled selected data-i18n="select_position">اختر التخصص...</option>
                            <option value="Architect">مهندس معماري (Architect)</option>
                            <option value="Interior Designer">مصمم داخلي (Interior Designer)</option>
                            <option value="Civil Engineer">مهندس مدني (Civil Engineer)</option>
                            <option value="Project Manager">مدير مشاريع (Project Manager)</option>
                            <option value="Site Engineer">مهندس موقع (Site Engineer)</option>
                            <option value="Administrative">إداري / سكرتارية (Admin)</option>
                        </select>
                    </div>
                    <button type="submit" class="w-full bg-black text-white font-bold py-4 hover:opacity-80 transition-opacity uppercase tracking-widest mt-4 rounded-md" data-i18n="form_send_app">إرسال الطلب</button>
                </form>
            </div>
        </div>
    </div>
    <div id="contact-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-4xl bg-white border border-gray-200 shadow-2xl relative p-10 md:p-16 rounded-xl">
                <button onclick="closeModal('contact-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <div class="grid md:grid-cols-2 gap-12">
                    <div class="flex flex-col justify-center bg-black text-white p-8 rounded-xl">
                        <h2 class="text-3xl font-bold mb-8" data-i18n="contact_header">تواصل معنا</h2>
                        <div class="space-y-6">
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="phone_label">الهاتف</h4><a href="tel:0582226234" class="text-xl font-english font-light hover:underline" dir="ltr">058 222 6234</a></div>
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="email_label">البريد الإلكتروني</h4><a href="mailto:info@truedraft.com.sa" class="text-lg font-english font-light hover:underline">info@truedraft.com.sa</a></div>
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="location_label">الموقع</h4><p class="text-lg font-light" data-i18n="location_val">الرياض، المملكة العربية السعودية</p></div>
                        </div>
                    </div>
                    <div>
                        <form onsubmit="submitContactForm(event)" class="space-y-6">
                            <div><label class="block text-sm font-bold mb-2 uppercase" data-i18n="form_name">الاسم</label><input type="text" id="contact-name" class="w-full p-4 bg-gray-50 border-b-2 border-transparent focus:border-black outline-none rounded-sm"></div>
                            <div><label class="block text-sm font-bold mb-2 uppercase" data-i18n="form_email">البريد الإلكتروني</label><input type="email" id="contact-email" class="w-full p-4 bg-gray-50 border-b-2 border-transparent focus:border-black outline-none rounded-sm"></div>
                            <div><label class="block text-sm font-bold mb-2 uppercase" data-i18n="form_message">الرسالة</label><textarea id="contact-message" class="w-full p-4 bg-gray-50 border-b-2 border-transparent focus:border-black outline-none h-32 rounded-sm"></textarea></div>
                            <button type="submit" class="w-full bg-black text-white font-bold py-4 hover:opacity-80 transition-opacity uppercase tracking-widest rounded-md" data-i18n="form_send">إرسال</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="privacy-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-3xl bg-white border border-gray-200 shadow-2xl relative p-10 md:p-16 rounded-xl h-[80vh] overflow-y-auto">
                <button onclick="closeModal('privacy-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6 sticky z-50 bg-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-3xl font-bold mb-8 sticky top-0 bg-white pb-4" data-i18n="privacy">سياسة الخصوصية</h2>
                <div class="prose max-w-none text-sm leading-relaxed text-gray-600 space-y-6">
                    <div class="lang-ar">
                        <p class="font-bold">مقدمة:</p><p>في شركة ترو درفت (True Draft)، ندرك أن مشاريع البناء والتصاميم هي أمور شخصية وهامة جداً لعملائنا. نحن نلتزم بحماية خصوصيتك وبياناتك الشخصية والهندسية، وتوضح هذه السياسة كيفية جمعنا واستخدامنا لهذه المعلومات.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">1. المعلومات التي نجمعها</h3><ul class="list-disc list-inside"><li>بيانات الهوية: الاسم الكامل.</li><li>بيانات الاتصال: رقم الهاتف، البريد الإلكتروني، والعنوان.</li><li>بيانات المشروع: موقع الأرض، المساحة، صور الموقع، المخططات الهندسية السابقة، صور الصكوك أو التراخيص (لغرض الدراسة والتسعير).</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">2. كيف نستخدم معلوماتك؟</h3><ul class="list-disc list-inside"><li>دراسة طلبك وتقديم عروض أسعار دقيقة ومخصصة لمشروعك.</li><li>التواصل معك لتحديد مواعيد المعاينة أو مناقشة التصاميم.</li><li>إتمام إجراءات التعاقد واستخراج التراخيص (إذا كانت ضمن نطاق العمل).</li><li>تحسين خدماتنا وتجربة المستخدم على الموقع.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">3. مشاركة البيانات</h3><p>نحن لا نقوم ببيع أو تأجير بياناتك الشخصية لأي طرف ثالث. ومع ذلك، قد نشارك بعض البيانات الضرورية في الحالات التالية فقط:</p><ul class="list-disc list-inside"><li>شركاء التنفيذ: مثل الموردين أو المقاولين من الباطن لغرض حساب الكميات أو التوريد لمشروعك الخاص.</li><li>الجهات الحكومية: في حال طُلب منا ذلك بموجب القانون أو لاستخراج تراخيص البناء الخاصة بك.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">4. أمن البيانات</h3><p>نتخذ كافة التدابير الأمنية التقنية والإدارية المناسبة لحماية بياناتك ومخططات منزلك من الوصول غير المصرح به، أو التغيير، أو الإفصاح.</p><ul class="list-disc list-inside"></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">5. حقوقك</h3><ul class="list-disc list-inside"><li>الاستفسار عن البيانات التي نحتفظ بها عنك.</li><li>طلب تصحيح أي معلومات خاطئة.</li><li>طلب حذف بياناتك من سجلاتنا (بشرط ألا يتعارض ذلك مع التزاماتنا القانونية أو التعاقدية القائمة).</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">6. ملفات تعريف الارتباط (Cookies)</h3><p>قد يستخدم موقعنا ملفات تعريف الارتباط لتحسين تجربتك وتذكر تفضيلاتك. يمكنك تعطيلها من إعدادات المتصفح الخاص بك، ولكن قد يؤثر ذلك على عمل بعض أجزاء الموقع.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">7. اتصل بنا</h3><p>إذا كان لديك أي استفسار حول سياسة الخصوصية، يسعدنا تواصلك معنا عبر:</p><p>البريد الإلكتروني: info@truedraft.com.sa</p><p>الهاتف: 058 222 6234</p>
                    </div>
                    <div class="lang-en hidden">
                        <p class="font-bold">Introduction:</p><p>At True Draft, we understand that construction projects and home designs are highly personal and significant to our clients. We are committed to protecting your privacy and your personal and engineering data. This policy outlines how we collect, use, and protect this information.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">1. Information We Collect</h3><ul class="list-disc list-inside"><li>Identity Data: Full name.</li><li>Contact Data: Phone number, email address, and location.</li><li>Project Data: Land location, area size, site photos, previous engineering plans, and copies of title deeds or permits (for study and pricing purposes).</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">2. How We Use Your Information</h3><ul class="list-disc list-inside"><li>Analyzing your request to provide accurate, customized quotes for your project.</li><li>Contacting you to schedule site visits or discuss designs.</li><li>Completing contracting procedures and obtaining permits (if within the scope of work).</li><li>Improving our services and user experience on the website.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">3. Data Sharing</h3><p>We do not sell or rent your personal data to any third parties. However, we may share necessary data in the following cases only:</p><ul class="list-disc list-inside"><li>Execution Partners: Such as suppliers or subcontractors, strictly for the purpose of quantity surveying or material supply for your specific project.</li><li>Government Authorities: If required by law or to process your building permits.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">4. Data Security</h3><p>We implement appropriate technical and administrative security measures to protect your data and home blueprints from unauthorized access, alteration, or disclosure.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">5. Your Rights</h3><ul class="list-disc list-inside"><li>Inquire about the data we hold about you.</li><li>Request correction of any incorrect information.</li><li>Request the deletion of your data from our records (provided it does not conflict with our ongoing legal or contractual obligations).</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">6. Cookies</h3><p>Our website may use cookies to enhance your experience and remember your preferences. You can disable cookies through your browser settings, though this may affect the functionality of some parts of the site.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">7. Contact Us</h3><p>If you have any questions regarding this Privacy Policy, please contact us via:</p><p>Email: info@truedraft.com.sa</p><p>Phone: 058 222 6234</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="terms-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-3xl bg-white border border-gray-200 shadow-2xl relative p-10 md:p-16 rounded-xl h-[80vh] overflow-y-auto">
                <button onclick="closeModal('terms-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6 sticky z-50 bg-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-3xl font-bold mb-8 sticky top-0 bg-white pb-4" data-i18n="terms">الشروط والأحكام</h2>
                <div class="prose max-w-none text-sm leading-relaxed text-gray-600 space-y-6">
                    <div class="lang-ar">
                        <p class="font-bold">مقدمة:</p><p>أهلاً بكم في موقع شركة ترو درفت (True Draft) للمقاولات العامة. يرجى قراءة هذه الشروط والأحكام بعناية قبل استخدام الموقع أو طلب أي من خدماتنا. بمجرد استخدامك لهذا الموقع، فإنك تقر بموافقتك الكاملة على هذه الشروط. إذا كنت لا توافق على أي جزء منها، يرجى التوقف عن استخدام الموقع فوراً.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">1. التعريفات</h3><ul class="list-disc list-inside"><li>"الشركة" أو "نحن": يقصد بها شركة ترو درفت (True Draft) للمقاولات العامة.</li><li>"العميل" أو "أنت": يقصد به أي فرد أو جهة اعتبارية تقوم بزيارة الموقع أو طلب خدماتنا.</li><li>"الخدمات": تشمل التصميم المعماري والداخلي، التنفيذ، الإشراف، وأي خدمات هندسية أو استشارية أخرى نعرضها.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">2. طبيعة الخدمات والتعاقد</h3><ul class="list-disc list-inside"><li>إن المعلومات والصور المعروضة على هذا الموقع هي لغرض التعريف بخدماتنا وعرض سابقة أعمالنا.</li><li>طلب "عرض سعر" عبر الموقع لا يعتبر عقداً ملزماً للشركة بالبدء في التنفيذ.</li><li>يخضع البدء الفعلي لأي مشروع (تصميم أو مقاولات) لتوقيع عقد رسمي منفصل ومكتوب يحدد التزامات الطرفين، الدفعات، الجدول الزمني، والمواصفات الفنية، وهو المرجع القانوني الوحيد بين الطرفين.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">3. حقوق الملكية الفكرية</h3><ul class="list-disc list-inside"><li>جميع المحتويات الموجودة على هذا الموقع (بما في ذلك النصوص، التصاميم الهندسية، المخططات، الشعارات، صور المشاريع المنفذة، والرسومات ثلاثية الأبعاد) هي ملكية حصرية لشركة "ترو درفت" ومحمية بموجب أنظمة الملكية الفكرية في المملكة العربية السعودية.</li><li>يمنع منعاً باتاً نسخ، إعادة إنتاج، أو استخدام أي من تصاميمنا لأغراض تجارية أو شخصية دون إذن كتابي صريح من إدارة الشركة.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">4. الأسعار والدفعات</h3><ul class="list-disc list-inside"><li>الأسعار التقديرية (إن وجدت على الموقع) قابلة للتغيير بناءً على أسعار مواد البناء في السوق ومواصفات المشروع الدقيقة.</li><li>يلتزم العميل بدفع المستحقات المالية وفقاً للدفعات المتفق عليها في العقد الرسمي المبرم لاحقاً.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">5. مسؤولية العميل</h3><ul class="list-disc list-inside"><li>أنت مسؤول عن صحة البيانات والمعلومات التي تقدمها لنا (مثل مساحة الأرض، الصكوك، التراخيص الحكومية).</li><li>تخلي الشركة مسؤوليتها عن أي تأخير أو غرامات ناتجة عن عدم صحة أوراق العميل أو عدم استخراجه للتراخيص اللازمة ما لم ينص العقد على تولينا هذه المهمة.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">6. إخلاء المسؤولية</h3><p>نسعى جاهدين لضمان دقة المعلومات على موقعنا، لكننا لا نقدم أي ضمانات بأن الموقع سيكون خالياً من الأخطاء المطبعية أو التقنية. استخدامك للموقع يكون على مسؤوليتك الخاصة.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">7. القانون الواجب التطبيق</h3><p>تخضع هذه الشروط والأحكام للأنظمة واللوائح المعمول بها في المملكة العربية السعودية. في حال نشوء أي نزاع، يتم اللجوء إلى الجهات القضائية المختصة في مدينة الرياض.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">8. التعديلات</h3><p>تحتفظ "ترو درفت" بالحق في تعديل هذه الشروط في أي وقت. يعتبر استمرارك في استخدام الموقع بعد التعديلات موافقة ضمنية عليها.</p>
                    </div>
                    <!-- English Content -->
                    <div class="lang-en hidden">
                        <p class="font-bold">Introduction:</p><p>Welcome to the True Draft General Contracting website. Please read these Terms and Conditions carefully before using our website or requesting any of our services. By accessing or using this website, you agree to be bound by these terms. If you do not agree with any part of these terms, please discontinue use immediately.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">1. Definitions</h3><ul class="list-disc list-inside"><li>"Company", "We", or "Us": Refers to True Draft General Contracting.</li><li>"Client" or "You": Refers to any individual or entity visiting the website or requesting our services.</li><li>"Services": Includes architectural and interior design, construction execution, engineering supervision, and any other consulting services we offer.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">2. Scope of Services and Contracting</h3><ul class="list-disc list-inside"><li>The information and images displayed on this website are for the purpose of showcasing our portfolio and services.</li><li>Requesting a "Quote" via the website does not constitute a binding contract to commence work.</li><li>The actual commencement of any project (design or construction) is subject to a separate, written official contract signed by both parties. This contract outlines obligations, payments, timeline, and technical specifications, and serves as the sole legal reference.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">3. Intellectual Property</h3><ul class="list-disc list-inside"><li>All content on this website (including text, engineering designs, blueprints, logos, 3D renders, and photos of executed projects) is the exclusive property of True Draft and is protected by Intellectual Property laws in the Kingdom of Saudi Arabia.</li><li>It is strictly prohibited to copy, reproduce, or use any of our designs for commercial or personal purposes without express written permission from the Company management.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">4. Pricing and Payments</h3><ul class="list-disc list-inside"><li>Estimated prices (if shown on the website) are subject to change based on market material costs and specific project requirements.</li><li>The Client is obligated to settle financial dues according to the payment schedule agreed upon in the formal written contract.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">5. Client Responsibilities</h3><ul class="list-disc list-inside"><li>You are responsible for the accuracy of the data and information you provide to us (e.g., land area, title deeds, government permits).</li><li>The Company disclaims responsibility for any delays or fines resulting from incorrect documentation provided by the Client or failure to obtain necessary permits, unless the contract explicitly states that we are responsible for such tasks.</li></ul>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">6. Disclaimer</h3><p>We strive to ensure the accuracy of the information on our website; however, we do not guarantee that the site is free from typographical or technical errors. Your use of the website is at your own risk.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">7. Governing Law</h3><p>These Terms and Conditions are governed by the laws and regulations of the Kingdom of Saudi Arabia. In the event of any dispute, the competent courts in the city of Riyadh shall have jurisdiction.</p>
                        <h3 class="text-lg font-bold text-black mt-6 mb-2">8. Amendments</h3><p>True Draft reserves the right to amend these terms at any time. Your continued use of the website after any changes constitutes your acceptance of the new terms.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const banners = ['images/banner1.jpg', 'images/banner2.jpg', 'images/banner3.jpg', 'images/banner4.jpg', 'images/banner5.jpg', 'images/banner6.jpg', 'images/banner7.jpg', 'images/banner8.jpg', 'images/banner9.jpg', 'images/banner10.jpg'];
        let currentSlide = 0;
        let currentLang = localStorage.getItem('lang') || 'ar';
        const translations = {
            ar: { 
                home: 'الرئيسية', about: 'عن ترو درفت', projects: 'مشاريعنا', blog: 'المدونة', contact: 'تواصل معنا', careers: 'التوظيف',
                about_title: 'عن True Draft', about_text: 'تأسست True Draft على مبدأ أن كل مشروع مميز يبدأ من مسودة حقيقية… مسودة دقيقة، صادقة، وواضحة الاتجاه. نحن نصنع مشاريع تُبنى على رؤية أصلية لا تنحرف، وتفاصيل تُصاغ بعناية منذ اللحظة الأولى وحتى اكتمال التنفيذ.',
                vision_title: 'رؤيتنا', vision_text: 'أن نكون مرجعاً في صناعة التصميم والبناء، حيث تبدأ المشاريع من أساس صحيح وتكتمل بمعايير عالية تعكس أصالة الفكرة الأولى.',
                mission_title: 'رسالتنا', mission_text: 'تقديم رحلة تصميم وبناء شفافة ومدروسة، نحافظ فيها على روح المشروع منذ مخططه الأول وحتى تسليمه كمنجز متقن ورفيع.',
                goal_title: 'هدفنا', goal_text: 'صياغة حلول تصميم وبناء ترتكز على فكرة نقيّة وخطة محكمة، لتتحول إلى واقع يحمل نفس صدق وجودة المسودة الأولى.',
                contact_header: 'تواصل معنا', email_label: 'البريد الإلكتروني', phone_label: 'اتصل بنا', location_label: 'الموقع', location_val: 'الرياض، المملكة العربية السعودية', rights: 'جميع الحقوق محفوظة لشركة True Draft © 2025', privacy: 'سياسة الخصوصية', terms: 'الشروط والأحكام',
                careers_title: 'انضم إلى فريقنا', careers_subtitle: 'املأ النموذج أدناه وسيتم إرسال طلبك مباشرة.',
                form_name: 'الاسم', form_phone: 'رقم الجوال', form_email: 'البريد الإلكتروني', form_position: 'المسمى الوظيفي', form_message: 'الرسالة', form_send: 'إرسال', form_send_app: 'إرسال الطلب', select_position: 'اختر التخصص...',
                privacy_intro: 'مقدمة:', privacy_text_1: 'في شركة ترو درفت (True Draft)، ندرك أن مشاريع البناء والتصاميم هي أمور شخصية وهامة جداً لعملائنا. نحن نلتزم بحماية خصوصيتك وبياناتك الشخصية والهندسية، وتوضح هذه السياسة كيفية جمعنا واستخدامنا لهذه المعلومات.', privacy_h1: '1. المعلومات التي نجمعها', privacy_text_2: 'عند استخدامك لموقعنا أو طلب خدمة، قد نطلب منك المعلومات التالية:', privacy_li_1: 'بيانات الهوية: الاسم الكامل.', privacy_li_2: 'بيانات الاتصال: رقم الهاتف، البريد الإلكتروني، والعنوان.', privacy_li_3: 'بيانات المشروع: موقع الأرض، المساحة، صور الموقع، المخططات الهندسية السابقة، صور الصكوك أو التراخيص (لغرض الدراسة والتسعير).',
                privacy_h2: '2. كيف نستخدم معلوماتك؟', privacy_text_3: 'نستخدم البيانات التي نجمعها للأغراض التالية فقط:', privacy_li_4: 'دراسة طلبك وتقديم عروض أسعار دقيقة ومخصصة لمشروعك.', privacy_li_5: 'التواصل معك لتحديد مواعيد المعاينة أو مناقشة التصاميم.', privacy_li_6: 'إتمام إجراءات التعاقد واستخراج التراخيص (إذا كانت ضمن نطاق العمل).', privacy_li_7: 'تحسين خدماتنا وتجربة المستخدم على الموقع.',
                privacy_h3: '3. مشاركة البيانات', privacy_text_4: 'نحن لا نقوم ببيع أو تأجير بياناتك الشخصية لأي طرف ثالث. ومع ذلك، قد نشارك بعض البيانات الضرورية في الحالات التالية فقط:', privacy_li_8: 'شركاء التنفيذ: مثل الموردين أو المقاولين من الباطن لغرض حساب الكميات أو التوريد لمشروعك الخاص.', privacy_li_9: 'الجهات الحكومية: في حال طُلب منا ذلك بموجب القانون أو لاستخراج تراخيص البناء الخاصة بك.',
                privacy_h4: '4. أمن البيانات', privacy_text_5: 'نتخذ كافة التدابير الأمنية التقنية والإدارية المناسبة لحماية بياناتك ومخططات منزلك من الوصول غير المصرح به، أو التغيير، أو الإفصاح.',
                privacy_h5: '5. حقوقك', privacy_text_6: 'يحق لك في أي وقت:', privacy_li_10: 'الاستفسار عن البيانات التي نحتفظ بها عنك.', privacy_li_11: 'طلب تصحيح أي معلومات خاطئة.', privacy_li_12: 'طلب حذف بياناتك من سجلاتنا (بشرط ألا يتعارض ذلك مع التزاماتنا القانونية أو التعاقدية القائمة).',
                privacy_h6: '6. ملفات تعريف الارتباط (Cookies)', privacy_text_7: 'قد يستخدم موقعنا ملفات تعريف الارتباط لتحسين تجربتك وتذكر تفضيلاتك. يمكنك تعطيلها من إعدادات المتصفح الخاص بك، ولكن قد يؤثر ذلك على عمل بعض أجزاء الموقع.',
                privacy_h7: '7. اتصل بنا', privacy_text_8: 'إذا كان لديك أي استفسار حول سياسة الخصوصية، يسعدنا تواصلك معنا عبر: البريد الإلكتروني: info@truedraft.com.sa - الهاتف: 0582226234',
                terms_intro: 'مقدمة:', terms_text_1: 'أهلاً بكم في موقع شركة ترو درفت (True Draft) للمقاولات العامة. يرجى قراءة هذه الشروط والأحكام بعناية قبل استخدام الموقع أو طلب أي من خدماتنا. بمجرد استخدامك لهذا الموقع، فإنك تقر بموافقتك الكاملة على هذه الشروط. إذا كنت لا توافق على أي جزء منها، يرجى التوقف عن استخدام الموقع فوراً.', terms_h1: '1. التعريفات', terms_li_1: '"الشركة" أو "نحن": يقصد بها شركة ترو درفت (True Draft) للمقاولات العامة.', terms_li_2: '"العميل" أو "أنت": يقصد به أي فرد أو جهة اعتبارية تقوم بزيارة الموقع أو طلب خدماتنا.', terms_li_3: '"الخدمات": تشمل التصميم المعماري والداخلي، التنفيذ، الإشراف، وأي خدمات هندسية أو استشارية أخرى نعرضها.',
                terms_h2: '2. طبيعة الخدمات والتعاقد', terms_li_4: 'إن المعلومات والصور المعروضة على هذا الموقع هي لغرض التعريف بخدماتنا وعرض سابقة أعمالنا.', terms_li_5: 'طلب "عرض سعر" عبر الموقع لا يعتبر عقداً ملزماً للشركة بالبدء في التنفيذ.', terms_li_6: 'يخضع البدء الفعلي لأي مشروع (تصميم أو مقاولات) لتوقيع عقد رسمي منفصل ومكتوب يحدد التزامات الطرفين، الدفعات، الجدول الزمني، والمواصفات الفنية، وهو المرجع القانوني الوحيد بين الطرفين.',
                terms_h3: '3. حقوق الملكية الفكرية', terms_li_7: 'جميع المحتويات الموجودة على هذا الموقع (بما في ذلك النصوص، التصاميم الهندسية، المخططات، الشعارات، صور المشاريع المنفذة، والرسومات ثلاثية الأبعاد) هي ملكية حصرية لشركة "ترو درفت" ومحمية بموجب أنظمة الملكية الفكرية في المملكة العربية السعودية.', terms_li_8: 'يمنع منعاً باتاً نسخ، إعادة إنتاج، أو استخدام أي من تصاميمنا لأغراض تجارية أو شخصية دون إذن كتابي صريح من إدارة الشركة.',
                terms_h4: '4. الأسعار والدفعات', terms_li_9: 'الأسعار التقديرية (إن وجدت على الموقع) قابلة للتغيير بناءً على أسعار مواد البناء في السوق ومواصفات المشروع الدقيقة.', terms_li_10: 'يلتزم العميل بدفع المستحقات المالية وفقاً للدفعات المتفق عليها في العقد الرسمي المبرم لاحقاً.',
                terms_h5: '5. مسؤولية العميل', terms_li_11: 'أنت مسؤول عن صحة البيانات والمعلومات التي تقدمها لنا (مثل مساحة الأرض، الصكوك، التراخيص الحكومية).', terms_li_12: 'تخلي الشركة مسؤوليتها عن أي تأخير أو غرامات ناتجة عن عدم صحة أوراق العميل أو عدم استخراجه للتراخيص اللازمة ما لم ينص العقد على تولينا هذه المهمة.',
                terms_h6: '6. إخلاء المسؤولية', terms_text_2: 'نسعى جاهدين لضمان دقة المعلومات على موقعنا، لكننا لا نقدم أي ضمانات بأن الموقع سيكون خالياً من الأخطاء المطبعية أو التقنية. استخدامك للموقع يكون على مسؤوليتك الخاصة.', terms_h7: '7. القانون الواجب التطبيق', terms_text_3: 'تخضع هذه الشروط والأحكام للأنظمة واللوائح المعمول بها في المملكة العربية السعودية. في حال نشوء أي نزاع، يتم اللجوء إلى الجهات القضائية المختصة في مدينة الرياض.', terms_h8: '8. التعديلات', terms_text_4: 'تحتفظ "ترو درفت" بالحق في تعديل هذه الشروط في أي وقت. يعتبر استمرارك في استخدام الموقع بعد التعديلات موافقة ضمنية عليها.'
            },
            en: {
                home: 'Home', about: 'About Us', projects: 'Projects', blog: 'Blog', contact: 'Contact', careers: 'Careers',
                about_title: 'About True Draft', about_text: 'True Draft was founded on the principle that every distinctive project begins with a true draft... a precise, honest, and clear-direction draft. We craft projects built on an original vision that does not deviate, with details meticulously shaped from the very first moment until completion.',
                vision_title: 'Vision', vision_text: 'To be a benchmark in the design and build industry, where projects start from a correct foundation and complete with high standards reflecting the originality of the initial idea.',
                mission_title: 'Mission', mission_text: 'To deliver a transparent and thoughtful design and build journey, preserving the project\'s spirit from its first blueprint to its delivery as a refined accomplishment.',
                goal_title: 'Goal', goal_text: 'To formulate design and build solutions grounded in a pure idea and a solid plan, transforming into reality carrying the same honesty and quality of the first draft.',
                contact_header: 'Get in Touch', email_label: 'Email', phone_label: 'Call Us', location_label: 'Location', location_val: 'Riyadh, Saudi Arabia', rights: 'All rights reserved True Draft © 2025', privacy: 'Privacy Policy', terms: 'Terms & Conditions',
                careers_title: 'Join Our Team', careers_subtitle: 'Fill the form below to send your application.',
                form_name: 'Name', form_phone: 'Mobile', form_email: 'Email', form_position: 'Position', form_message: 'Message',
                form_send: 'Send', form_send_app: 'Submit Application', select_position: 'Select Position...',
                privacy_intro: 'Introduction:', privacy_text_1: 'At True Draft, we understand that construction projects and home designs are highly personal and significant to our clients. We are committed to protecting your privacy and your personal and engineering data. This policy outlines how we collect, use, and protect this information.',
                privacy_h1: '1. Information We Collect', privacy_text_2: 'When you use our website or request a service, we may collect the following information:', privacy_li_1: 'Identity Data: Full name.', privacy_li_2: 'Contact Data: Phone number, email address, and location.', privacy_li_3: 'Project Data: Land location, area size, site photos, previous engineering plans, and copies of title deeds or permits (for study and pricing purposes).',
                privacy_h2: '2. How We Use Your Information?', privacy_text_3: 'We use the data we collect solely for the following purposes:', privacy_li_4: 'Analyzing your request to provide accurate, customized quotes for your project.', privacy_li_5: 'Contacting you to schedule site visits or discuss designs.', privacy_li_6: 'Completing contracting procedures and obtaining permits (if within the scope of work).', privacy_li_7: 'Improving our services and user experience on the website.',
                privacy_h3: '3. Data Sharing', privacy_text_4: 'We do not sell or rent your personal data to any third parties. However, we may share necessary data in the following cases only:', privacy_li_8: 'Execution Partners: Such as suppliers or subcontractors, strictly for the purpose of quantity surveying or material supply for your specific project.', privacy_li_9: 'Government Authorities: If required by law or to process your building permits.',
                privacy_h4: '4. Data Security', privacy_text_5: 'We implement appropriate technical and administrative security measures to protect your data and home blueprints from unauthorized access, alteration, or disclosure.',
                privacy_h5: '5. Your Rights', privacy_text_6: 'You have the right at any time to:', privacy_li_10: 'Inquire about the data we hold about you.', privacy_li_11: 'Request correction of any incorrect information.', privacy_li_12: 'Request the deletion of your data from our records (provided it does not conflict with our ongoing legal or contractual obligations).',
                privacy_h6: '6. Cookies', privacy_text_7: 'Our website may use cookies to enhance your experience and remember your preferences. You can disable cookies through your browser settings, though this may affect the functionality of some parts of the site.',
                privacy_h7: '7. Contact Us', privacy_text_8: 'If you have any questions regarding this Privacy Policy, please contact us via: Email: info@truedraft.com.sa - Phone: 0582226234',
                terms_intro: 'Introduction:', terms_text_1: 'Welcome to the True Draft General Contracting website. Please read these Terms and Conditions carefully before using our website or requesting any of our services. By accessing or using this website, you agree to be bound by these terms. If you do not agree with any part of these terms, please discontinue use immediately.',
                terms_h1: '1. Definitions', terms_li_1: '"Company", "We", or "Us": Refers to True Draft General Contracting.', terms_li_2: '"Client" or "You": Refers to any individual or entity visiting the website or requesting our services.', terms_li_3: '"Services": Includes architectural and interior design, construction execution, engineering supervision, and any other consulting services we offer.',
                terms_h2: '2. Scope of Services and Contracting', terms_li_4: 'The information and images displayed on this website are for the purpose of showcasing our portfolio and services.', terms_li_5: 'Requesting a "Quote" via the website does not constitute a binding contract to commence work.', terms_li_6: 'The actual commencement of any project (design or construction) is subject to a separate, written official contract signed by both parties. This contract outlines obligations, payments, timeline, and technical specifications, and serves as the sole legal reference.',
                terms_h3: '3. Intellectual Property', terms_li_7: 'All content on this website (including text, engineering designs, blueprints, logos, 3D renders, and photos of executed projects) is the exclusive property of True Draft and is protected by Intellectual Property laws in the Kingdom of Saudi Arabia.', terms_li_8: 'It is strictly prohibited to copy, reproduce, or use any of our designs for commercial or personal purposes without express written permission from the Company management.',
                terms_h4: '4. Prices and Payments', terms_li_9: 'Estimated prices (if shown on the website) are subject to change based on market material costs and specific project requirements.', terms_li_10: 'The Client is obligated to settle financial dues according to the payment schedule agreed upon in the formal written contract.',
                terms_h5: '5. Client Responsibilities', terms_li_11: 'You are responsible for the accuracy of the data and information you provide to us (e.g., land area, title deeds, government permits).', terms_li_12: 'The Company disclaims responsibility for any delays or fines resulting from incorrect documentation provided by the Client or failure to obtain necessary permits, unless the contract explicitly states that we are responsible for such tasks.',
                terms_h6: '6. Disclaimer', terms_text_2: 'We strive to ensure the accuracy of the information on our website; however, we do not guarantee that the site is free from typographical or technical errors. Your use of the website is at your own risk.',
                terms_h7: '7. Governing Law', terms_text_3: 'These Terms and Conditions are governed by the laws and regulations of the Kingdom of Saudi Arabia. In the event of any dispute, the competent courts in the city of Riyadh shall have jurisdiction.',
                terms_h8: '8. Amendments', terms_text_4: 'True Draft reserves the right to amend these terms at any time. Your continued use of the website after any changes constitutes your acceptance of the new terms.'
            }
        };

        // Shared Globals (for onclick functions)
        window.openModal = function(id) { 
            document.getElementById(id).classList.remove('hidden'); 
            document.body.style.overflow = 'hidden'; 
            updateLegalLang(); // Ensure legal texts are correctly displayed on open
        };
        window.closeModal = function(id) { 
            document.getElementById(id).classList.add('hidden'); 
            document.body.style.overflow = 'auto'; 
        };
        window.toggleMenu = function() { 
            const m=document.getElementById('mobile-menu'); 
            m.classList.toggle('hidden'); 
            m.classList.toggle('flex'); 
        };
        window.submitCareerForm = function(e) { 
            e.preventDefault(); 
            const n=document.getElementById('career-name').value; 
            window.location.href=`mailto:hr@truedraft.com.sa?subject=Job Application: ${n}`; 
        };
        window.submitContactForm = function(e) { 
            e.preventDefault(); 
            const n=document.getElementById('contact-name').value; 
            window.location.href=`mailto:info@truedraft.com.sa?subject=Contact: ${n}`; 
        };
        window.toggleLanguage = toggleLanguage;
        window.nextSlide = nextSlide; // Made global for slider controls
        window.prevSlide = prevSlide; // Made global for slider controls

        function applyLanguage() {
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.body.style.fontFamily = currentLang === 'ar' ? "'Cairo', sans-serif" : "'Manrope', sans-serif";
            const btnText = document.getElementById('lang-btn-text');
            if(btnText) btnText.textContent = currentLang === 'ar' ? 'EN' : 'عربي';
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[currentLang][key]) el.textContent = translations[currentLang][key];
            });
            updateLegalLang(); // Apply language to legal modals
        }

        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            localStorage.setItem('lang', currentLang);
            applyLanguage();
        }

        function updateLegalLang() {
            // This function is now correctly defined and called by applyLanguage and openModal
            if (currentLang === 'ar') {
                document.querySelectorAll('.lang-ar').forEach(el => el.classList.remove('hidden'));
                document.querySelectorAll('.lang-en').forEach(el => el.classList.add('hidden'));
            } else {
                document.querySelectorAll('.lang-ar').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.lang-en').forEach(el => el.classList.remove('hidden'));
            }
        }
        
        function initSlider() {
            const container = document.getElementById('slider-container');
            if(!container) return;
            container.innerHTML = ''; // Clear existing content
            banners.forEach((src, index) => {
                const div = document.createElement('div');
                div.className = `slide ${index === 0 ? 'active' : ''}`;
                const img = document.createElement('img');
                img.src = src; img.alt = `Slide ${index + 1}`;
                img.onerror = function() { this.style.display = 'none'; }; 
                div.appendChild(img); container.appendChild(div);
            });
            if (window.sliderInterval) clearInterval(window.sliderInterval); // Clear any old interval
            window.sliderInterval = setInterval(() => {
                const slides = document.querySelectorAll('.slide');
                if (slides.length) {
                    slides[currentSlide].classList.remove('active');
                    currentSlide = (currentSlide + 1) % slides.length;
                    slides[currentSlide].classList.add('active');
                }
            }, 5000);
        }
        function nextSlide() { 
            const s=document.querySelectorAll('.slide'); 
            if(s.length){ 
                s[currentSlide].classList.remove('active'); 
                currentSlide=(currentSlide+1)%s.length; 
                s[currentSlide].classList.add('active'); 
            }
        }
        function prevSlide() { 
            const s=document.querySelectorAll('.slide'); 
            if(s.length){ 
                s[currentSlide].classList.remove('active'); 
                currentSlide=(currentSlide-1+s.length)%s.length; 
                s[currentSlide].classList.add('active'); 
            }
        }

        document.addEventListener('DOMContentLoaded', () => { 
            applyLanguage(); 
            initSlider(); 
        });
    </script>
</body>
</html>--- START OF FILE erp/erp.html ---

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>True Draft ERP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- SheetJS -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #f3f4f6; touch-action: manipulation; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #999; }
        
        #initial-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #f3f4f6; z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .loader { border: 4px solid #e5e7eb; border-top: 4px solid #000; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .date-en { font-family: sans-serif; direction: ltr; display: inline-block; }
    </style>
</head>
<body>
    <div id="initial-loader">
        <div class="loader"></div>
        <p class="mt-4 text-gray-500 font-bold">جاري الاتصال بالنظام...</p>
    </div>

    <div id="root"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set, onValue, remove, update, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAgxIJYhMQB_2n_CbQ47uhnU8lBE2ji5J8",
            authDomain: "truedraftcrm.firebaseapp.com",
            projectId: "truedraftcrm",
            storageBucket: "truedraftcrm.firebasestorage.app",
            messagingSenderId: "920547055600",
            appId: "1:920547055600:web:c74f7de68ca8ae35852f35"
        };

        try {
            const app = initializeApp(firebaseConfig);
            const db = getDatabase(app);
            const auth = getAuth(app);

            window.db = db;
            window.auth = auth;
            window.dbRef = ref;
            window.dbPush = push;
            window.dbSet = set;
            window.dbOnValue = onValue;
            window.dbRemove = remove;
            window.dbUpdate = update;
            window.dbGet = get;
            window.authSignIn = signInWithEmailAndPassword;
            window.authSignOut = signOut;
            window.authListener = onAuthStateChanged;
            
            window.firebaseReady = true;
        } catch (error) {
            console.error("Firebase Init Error:", error);
            document.getElementById('initial-loader').innerHTML = '<p style="color:red">خطأ في الاتصال بقاعدة البيانات.</p>';
        }
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;
        
        const playAssignSound = (assignedName) => {
            if (!assignedName) return;
            let soundFile = null;
            if (assignedName.includes("عمر")) soundFile = "./omar.mp3";
            else if (assignedName.includes("معاذ")) soundFile = "./moath.mp3";

            if (soundFile) {
                const snd = new Audio(soundFile);
                snd.volume = 1.0; 
                snd.play().catch(e => console.log("Audio play failed:", e));
            }
        };

        const openWhatsApp = (phone) => {
            if (!phone) return;
            let clean = phone.replace(/\D/g, '');
            if (clean.startsWith('0')) clean = '966' + clean.substring(1);
            else if (!clean.startsWith('966')) clean = '966' + clean;
            
            window.open(`https://wa.me/${clean}`, '_blank');
        };

        const Icons = {
            LayoutDashboard: "layout-dashboard", Users: "users", LogOut: "log-out", 
            Plus: "plus", Search: "search", Trash2: "trash-2", LinkIcon: "link", 
            UserCheck: "user-check", Filter: "filter", Edit2: "edit-2", 
            ExternalLink: "external-link", X: "x", Send: "send",
            FolderKanban: "folder-kanban", Phone: "phone", FileText: "file-text",
            Briefcase: "briefcase", CheckSquare: "check-square", XCircle: "x-circle",
            Shield: "shield", Lock: "lock", Menu: "menu", Save: "save",
            MessageCircle: "message-circle", PieChart: "pie-chart", Megaphone: "megaphone",
            AlertCircle: "alert-circle", FileSpreadsheet: "file-spreadsheet", Square: "square"
        };

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => { if(window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={Icons[name]} width={size} height={size} className={className}></i>;
        };

        const ADMIN_EMAIL = "al2we09@gmail.com";
        const PROJECT_TYPES = ["سكني", "تجاري"];
        const SERVICE_TYPES = ["تصميم", "تنفيذ"];
        const CLIENT_SOURCES = [
            "تويتر (X)", "انستقرام", "تيك توك", "سناب شات", 
            "إعلان جوجل", "توصية / صديق", "موقع إلكتروني", "أخرى"
        ];
        
        const STATUS_LIST = [
            { key: 'New', label: 'جديد', color: 'bg-yellow-100 text-yellow-800' },
            { key: 'SiteVisit', label: 'معاينة الموقع', color: 'bg-orange-100 text-orange-800' },
            { key: 'Scope', label: 'الحصر - تفاصيل المشروع', color: 'bg-purple-100 text-purple-800' },
            { key: 'Proposal', label: 'عرض السعر', color: 'bg-blue-100 text-blue-800' },
            { key: 'Contract', label: 'العقد', color: 'bg-green-100 text-green-800' },
            { key: 'Design', label: 'تصميم', color: 'bg-indigo-100 text-indigo-800' },
            { key: 'Plans', label: 'اعداد المخططات', color: 'bg-pink-100 text-pink-800' },
            { key: 'Scope2', label: 'حصر 2', color: 'bg-cyan-100 text-cyan-800' },
            { key: 'Execution', label: 'التنفيذ', color: 'bg-teal-100 text-teal-800' },
            { key: 'Completed', label: 'مكتمل', color: 'bg-emerald-100 text-emerald-800' },
            { key: 'Lost', label: 'ملغى', color: 'bg-red-100 text-red-800' }
        ];

        const getStatusInfo = (key) => {
            const found = STATUS_LIST.find(s => s.key === key);
            return found || { label: key, color: 'bg-gray-100 text-gray-800' };
        };

        const formatDate = (iso) => {
            if (!iso) return '-';
            return <span className="date-en">{new Date(iso).toLocaleDateString('en-GB')}</span>;
        };

        const Login = () => {
            const [email, setEmail] = useState('');
            const [pass, setPass] = useState('');
            const [err, setErr] = useState('');
            const [loading, setLoading] = useState(false);

            const handleLogin = (e) => {
                e.preventDefault();
                setLoading(true);
                setErr('');
                window.authSignIn(window.auth, email, pass)
                    .catch(() => {
                        setLoading(false);
                        setErr('خطأ في البريد أو كلمة المرور');
                    });
            };

            return (
                <div className="min-h-screen flex items-center justify-center bg-[#101414]">
                    <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md text-center">
                        <img src="../logo.png" alt="True Draft" className="h-20 mx-auto mb-6 object-contain" onError={(e) => e.target.style.display='none'} />
                        <h1 className="text-2xl font-bold mb-2">نظام إدارة العملاء</h1>
                        <p className="text-gray-500 mb-8">تسجيل دخول الموظفين</p>
                        {err && <div className="bg-red-50 text-red-600 p-3 rounded mb-4 text-sm">{err}</div>}
                        <form onSubmit={handleLogin} className="space-y-4">
                            <input type="email" required placeholder="البريد الإلكتروني" className="w-full p-3 border rounded-lg outline-none focus:border-black" value={email} onChange={e=>setEmail(e.target.value)} />
                            <input type="password" required placeholder="كلمة المرور" className="w-full p-3 border rounded-lg outline-none focus:border-black" value={pass} onChange={e=>setPass(e.target.value)} />
                            <button disabled={loading} className="w-full bg-black text-white p-3 rounded-lg font-bold hover:bg-gray-800 transition disabled:opacity-50">
                                {loading ? 'جاري الدخول...' : 'دخول'}
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        const Dashboard = ({ clients }) => {
            const stats = STATUS_LIST.reduce((acc, status) => {
                acc[status.key] = clients.filter(c => c.status === status.key).length;
                return acc;
            }, {});
            
            const sources = {};
            clients.forEach(c => {
                const s = c.source || 'غير محدد';
                sources[s] = (sources[s] || 0) + 1;
            });
            const sortedSources = Object.entries(sources).sort((a, b) => b[1] - a[1]);

            return (
                <div className="space-y-8 animate-fade-in">
                    <div className="flex justify-between items-end">
                        <div>
                            <h2 className="text-3xl font-bold text-gray-800">لوحة التحكم</h2>
                            <p className="text-gray-500 mt-1">نظرة عامة على أداء الشركة</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="bg-gradient-to-br from-black to-gray-800 text-white p-6 rounded-2xl shadow-lg">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="text-gray-400 text-sm font-medium mb-1">إجمالي العملاء</div>
                                    <div className="text-4xl font-bold">{clients.length}</div>
                                </div>
                                <div className="bg-white/10 p-3 rounded-xl"><Icon name="Users" className="text-white" /></div>
                            </div>
                        </div>
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="text-gray-500 text-sm font-medium mb-1">عقود موقعة</div>
                                    <div className="text-4xl font-bold text-green-600">{stats['Contract'] || 0}</div>
                                </div>
                                <div className="bg-green-50 p-3 rounded-xl"><Icon name="Briefcase" className="text-green-600" /></div>
                            </div>
                        </div>
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="text-gray-500 text-sm font-medium mb-1">عملاء جدد</div>
                                    <div className="text-4xl font-bold text-yellow-600">{stats['New'] || 0}</div>
                                </div>
                                <div className="bg-yellow-50 p-3 rounded-xl"><Icon name="FolderKanban" className="text-yellow-600" /></div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 lg:col-span-1">
                            <h3 className="font-bold text-lg mb-6 flex items-center gap-2"><Icon name="Megaphone" size={18}/> مصادر العملاء</h3>
                            <div className="space-y-4">
                                {sortedSources.length > 0 ? sortedSources.map(([source, count]) => {
                                    const percent = Math.round((count / clients.length) * 100);
                                    return (
                                        <div key={source}>
                                            <div className="flex justify-between text-sm mb-1">
                                                <span className="font-bold text-gray-700">{source}</span>
                                                <span className="text-gray-500">{count} ({percent}%)</span>
                                            </div>
                                            <div className="w-full bg-gray-100 rounded-full h-2">
                                                <div className="bg-black h-2 rounded-full" style={{width: `${percent}%`}}></div>
                                            </div>
                                        </div>
                                    );
                                }) : <div className="text-center text-gray-400 py-8">لا توجد بيانات</div>}
                            </div>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 lg:col-span-2">
                             <h3 className="font-bold text-lg mb-6 flex items-center gap-2"><Icon name="PieChart" size={18}/> تفاصيل الحالات</h3>
                             <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                {STATUS_LIST.map(s => (
                                    <div key={s.key} className={`p-4 rounded-xl border ${s.key === 'Lost' ? 'bg-red-50 border-red-100' : 'bg-gray-50 border-gray-100'}`}>
                                        <div className="text-gray-500 text-xs font-bold mb-2 truncate" title={s.label}>{s.label}</div>
                                        <div className={`text-2xl font-bold ${s.key === 'Lost' ? 'text-red-600' : 'text-gray-800'}`}>{stats[s.key] || 0}</div>
                                    </div>
                                ))}
                             </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Clients = ({ clients, users, user }) => {
            const [search, setSearch] = useState('');
            const [statusFilter, setStatusFilter] = useState('');
            const [assignFilter, setAssignFilter] = useState('');
            const [addOpen, setAddOpen] = useState(false);
            const [editId, setEditId] = useState(null);

            const addClient = (data) => {
                const newRef = window.dbPush(window.dbRef(window.db, 'clients'));
                window.dbSet(newRef, { ...data, dateAdded: new Date().toISOString(), addedBy: user.name || user.email });
                if (data.assignedTo) {
                    playAssignSound(data.assignedTo);
                }
                setAddOpen(false);
            };

            const updateClient = (id, data) => {
                window.dbUpdate(window.dbRef(window.db, `clients/${id}`), data);
            };

            const deleteClient = (id) => {
                if(confirm('حذف العميل نهائياً؟')) window.dbRemove(window.dbRef(window.db, `clients/${id}`));
            };

            const addNote = (id, text) => {
                const notesRef = window.dbRef(window.db, `clients/${id}/notes`);
                const newNoteRef = window.dbPush(notesRef);
                window.dbSet(newNoteRef, {
                    text,
                    author: user.name || user.email,
                    timestamp: new Date().toISOString()
                });
            };

            const addTask = (id, text) => {
                const ref = window.dbPush(window.dbRef(window.db, `clients/${id}/tasks`));
                window.dbSet(ref, { text, completed: false, createdAt: new Date().toISOString() });
            };
            const toggleTask = (cid, tid, status) => {
                window.dbUpdate(window.dbRef(window.db, `clients/${cid}/tasks/${tid}`), { completed: !status });
            };
            const deleteTask = (cid, tid) => {
                window.dbRemove(window.dbRef(window.db, `clients/${cid}/tasks/${tid}`));
            };

            // Export Function
            const exportExcel = () => {
                if (!clients.length) { alert('لا يوجد بيانات للتصدير'); return; }
                
                const data = clients.map(c => {
                    const status = getStatusInfo(c.status).label;
                    const notesCount = c.notes ? Object.keys(c.notes).length : 0;
                    return {
                        'اسم العميل': c.name,
                        'رقم الجوال': c.phone,
                        'نوع المشروع': c.projectType,
                        'نوع الخدمة': c.serviceType,
                        'الحالة': status,
                        'مسند إلى': c.assignedTo || 'غير مسند',
                        'المصدر': c.source || 'غير محدد',
                        'تاريخ الإضافة': new Date(c.dateAdded).toLocaleDateString('en-GB'),
                        'أضيف بواسطة': c.addedBy,
                        'عدد الملاحظات': notesCount,
                        'رابط Drive': c.driveLink
                    };
                });

                const ws = XLSX.utils.json_to_sheet(data);
                const wscols = [
                    {wch:20}, {wch:15}, {wch:15}, {wch:15}, {wch:15}, {wch:15}, {wch:15}, {wch:15}, {wch:15}, {wch:10}, {wch:30}
                ];
                ws['!cols'] = wscols;

                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, "العملاء");
                XLSX.writeFile(wb, `TrueDraft_Clients_${new Date().toISOString().slice(0,10)}.xlsx`);
            };

            const filtered = clients.filter(c => {
                const matchSearch = c.name.toLowerCase().includes(search.toLowerCase()) || c.phone.includes(search);
                const matchStatus = statusFilter ? c.status === statusFilter : true;
                const matchAssign = assignFilter ? c.assignedTo === assignFilter : true;
                return matchSearch && matchStatus && matchAssign;
            });

            const editingClient = clients.find(c => c.id === editId);

            return (
                <div className="space-y-6">
                    <div className="flex flex-col md:flex-row justify-between gap-4">
                        <h2 className="text-2xl font-bold">إدارة العملاء</h2>
                        <div className="flex gap-2">
                            {user.role === 'admin' && (
                                <button onClick={exportExcel} className="bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-bold hover:bg-green-700 transition shadow-lg">
                                    <Icon name="FileSpreadsheet" size={18} /> تصدير Excel
                                </button>
                            )}
                            <button onClick={() => setAddOpen(true)} className="bg-black text-white px-4 py-2 rounded-lg flex items-center gap-2 font-bold hover:bg-gray-800 transition shadow-lg hover:shadow-xl">
                                <Icon name="Plus" size={18} /> إضافة عميل
                            </button>
                        </div>
                    </div>

                    <div className="bg-white p-4 rounded-xl shadow-sm border flex flex-col md:flex-row gap-4">
                        <div className="flex-1 relative">
                            <div className="absolute top-3 right-3 text-gray-400"><Icon name="Search" size={18} /></div>
                            <input className="w-full pr-10 p-2 border rounded-lg outline-none focus:border-black" placeholder="بحث بالاسم أو رقم الجوال..." value={search} onChange={e=>setSearch(e.target.value)} />
                        </div>
                        <select className="p-2 border rounded-lg outline-none bg-white" value={statusFilter} onChange={e=>setStatusFilter(e.target.value)}>
                            <option value="">كل الحالات</option>
                            {STATUS_LIST.map(s => <option key={s.key} value={s.key}>{s.label}</option>)}
                        </select>
                        <select className="p-2 border rounded-lg outline-none bg-white" value={assignFilter} onChange={e=>setAssignFilter(e.target.value)}>
                            <option value="">كل الموظفين</option>
                            {users.map(u => <option key={u.id} value={u.name}>{u.name}</option>)}
                        </select>
                        {(search || statusFilter || assignFilter) && <button onClick={()=>{setSearch('');setStatusFilter('');setAssignFilter('')}} className="text-red-500 text-sm underline">مسح</button>}
                    </div>

                    <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
                        <div className="overflow-x-auto">
                            <table className="w-full text-right text-sm">
                                <thead className="bg-gray-50 text-gray-500 font-bold border-b">
                                    <tr>
                                        <th className="p-4">الاسم / الجوال</th>
                                        <th className="p-4">التفاصيل</th>
                                        <th className="p-4">الحالة</th>
                                        <th className="p-4">مسند إلى</th>
                                        <th className="p-4">تاريخ الإنشاء</th>
                                        <th className="p-4">آخر تحديث</th>
                                        <th className="p-4">إجراءات</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y">
                                    {filtered.map(c => {
                                        const statusInfo = getStatusInfo(c.status);
                                        const lastNoteTimestamp = c.notes && Object.keys(c.notes).length > 0 ? Object.values(c.notes).pop().timestamp : null;
                                        const lastActivity = lastNoteTimestamp || c.dateAdded;
                                        const daysInactive = (new Date() - new Date(lastActivity)) / (1000 * 60 * 60 * 24);
                                        const isForgotten = daysInactive > 7 && c.status !== 'Completed' && c.status !== 'Lost';

                                        return (
                                            <tr key={c.id} className={`group transition-colors ${isForgotten ? 'bg-red-50 hover:bg-red-100' : 'hover:bg-gray-50'}`}>
                                                <td className="p-4">
                                                    <div className="font-bold text-base">{c.name}</div>
                                                    <div className="flex items-center gap-2 mt-1">
                                                        <span className="text-gray-400 text-xs date-en">{c.phone}</span>
                                                        <button onClick={() => openWhatsApp(c.phone)} className="text-green-500 hover:text-green-600 hover:bg-green-50 rounded-full p-1 transition" title="فتح واتساب">
                                                            <Icon name="MessageCircle" size={16} />
                                                        </button>
                                                    </div>
                                                </td>
                                                <td className="p-4 text-gray-600">
                                                    <div className="font-medium text-gray-800">{c.projectType}</div>
                                                    <div className="text-xs text-gray-400">{c.serviceType}</div>
                                                    <div className="text-[10px] text-gray-400 mt-0.5">{c.source || 'غير محدد'}</div>
                                                </td>
                                                <td className="p-4">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-bold ${statusInfo.color}`}>
                                                        {statusInfo.label}
                                                    </span>
                                                </td>
                                                <td className="p-4">
                                                    {c.assignedTo ? <div className="flex items-center gap-1 text-gray-700"><Icon name="UserCheck" size={14}/> {c.assignedTo}</div> : <span className="text-gray-300">-</span>}
                                                </td>
                                                <td className="p-4 text-xs text-gray-500">
                                                    {formatDate(c.dateAdded)}
                                                </td>
                                                <td className="p-4 text-xs">
                                                    <div className={isForgotten ? "text-red-600 font-bold" : "text-gray-500"}>
                                                        {formatDate(lastActivity)}
                                                    </div>
                                                    {isForgotten && (
                                                        <div className="flex items-center gap-1 text-red-500 text-[10px] font-bold mt-1">
                                                            <Icon name="AlertCircle" size={12} />
                                                            <span>منذ {Math.floor(daysInactive)} يوم</span>
                                                        </div>
                                                    )}
                                                </td>
                                                <td className="p-4">
                                                    <div className="flex gap-2">
                                                        <button onClick={()=>setEditId(c.id)} className="text-blue-500 hover:bg-blue-50 p-2 rounded border border-transparent hover:border-blue-100 transition"><Icon name="Edit2" size={16}/></button>
                                                        {c.driveLink && <a href={c.driveLink} target="_blank" className="text-gray-500 hover:bg-gray-50 p-2 rounded border border-transparent hover:border-gray-200 transition"><Icon name="LinkIcon" size={16}/></a>}
                                                        <button onClick={()=>deleteClient(c.id)} className="text-red-400 hover:bg-red-50 p-2 rounded border border-transparent hover:border-red-100 transition"><Icon name="Trash2" size={16}/></button>
                                                    </div>
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    {addOpen && <AddModal onClose={()=>setAddOpen(false)} onAdd={addClient} users={users} />}
                    {editingClient && <EditModal c={editingClient} onClose={()=>setEditId(null)} onUpdate={updateClient} onNote={addNote} onAddTask={addTask} onToggleTask={toggleTask} onDeleteTask={deleteTask} users={users} user={user} />}
                </div>
            );
        };

        const AddModal = ({ onClose, onAdd, users }) => {
            const [d, setD] = useState({ name: '', phone: '', projectType: 'سكني', serviceType: 'تصميم', status: 'New', driveLink: '', assignedTo: '', source: '' });
            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                    <div className="bg-white w-full max-w-lg rounded-2xl p-6 shadow-2xl overflow-y-auto max-h-[90vh]">
                        <div className="flex justify-between items-center mb-6 border-b pb-4">
                            <h3 className="text-xl font-bold">إضافة عميل جديد</h3>
                            <button onClick={onClose}><Icon name="X" /></button>
                        </div>
                        <div className="space-y-4">
                            <div className="grid grid-cols-2 gap-4">
                                <div><label className="text-sm font-bold mb-1 block">الاسم</label><input className="w-full border p-2 rounded outline-none focus:border-black" value={d.name} onChange={e=>setD({...d, name:e.target.value})} /></div>
                                <div><label className="text-sm font-bold mb-1 block">رقم الجوال</label><input className="w-full border p-2 rounded outline-none focus:border-black date-en" placeholder="05xxxxxxxx" value={d.phone} onChange={e=>setD({...d, phone:e.target.value})} /></div>
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-sm font-bold mb-1 block">نوع المشروع</label>
                                    <select className="w-full border p-2 rounded outline-none bg-white" value={d.projectType} onChange={e=>setD({...d, projectType:e.target.value})}>
                                        {PROJECT_TYPES.map(t=><option key={t} value={t}>{t}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-sm font-bold mb-1 block">الخدمة</label>
                                    <select className="w-full border p-2 rounded outline-none bg-white" value={d.serviceType} onChange={e=>setD({...d, serviceType:e.target.value})}>
                                        {SERVICE_TYPES.map(t=><option key={t} value={t}>{t}</option>)}
                                    </select>
                                </div>
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-sm font-bold mb-1 block">إسناد إلى</label>
                                    <select className="w-full border p-2 rounded outline-none bg-white" value={d.assignedTo} onChange={e=>setD({...d, assignedTo:e.target.value})}>
                                        <option value="">بدون إسناد</option>
                                        {users.map(u=><option key={u.id} value={u.name}>{u.name}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-sm font-bold mb-1 block">المصدر</label>
                                    <select className="w-full border p-2 rounded outline-none bg-white" value={d.source || ''} onChange={e=>setD({...d, source:e.target.value})}>
                                        <option value="">اختر المصدر</option>
                                        {CLIENT_SOURCES.map(s=><option key={s} value={s}>{s}</option>)}
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label className="text-sm font-bold mb-1 block">رابط DRIVE <span className="text-red-500">*</span></label>
                                <input className="w-full border p-2 rounded outline-none focus:border-black text-left dir-ltr" placeholder="https://" value={d.driveLink} onChange={e=>setD({...d, driveLink:e.target.value})} />
                            </div>
                            <button onClick={() => { if(d.name && d.driveLink) onAdd(d); }} className="w-full bg-black text-white py-3 rounded-lg font-bold mt-4 hover:bg-gray-800 transition">حفظ العميل</button>
                        </div>
                    </div>
                </div>
            );
        };

        const EditModal = ({ c, onClose, onUpdate, users, user, onNote, onAddTask, onToggleTask, onDeleteTask }) => {
            const [d, setD] = useState({ ...c });
            const [note, setNote] = useState('');
            const [tab, setTab] = useState('chat');
            const [newTask, setNewTask] = useState('');
            const chatContainer = useRef(null);
            
            useEffect(() => { 
                setD(c); 
                setTimeout(() => {
                    if (chatContainer.current) chatContainer.current.scrollTop = chatContainer.current.scrollHeight;
                }, 100);
            }, [c]);

            const saveAndClose = () => { 
                if (d.assignedTo && d.assignedTo !== c.assignedTo) {
                    playAssignSound(d.assignedTo);
                }
                onUpdate(c.id, d); 
                onClose(); 
            };
            const send = (e) => { e.preventDefault(); if(note.trim()) { onNote(c.id, note); setNote(''); } };
            const submitTask = (e) => { e.preventDefault(); if(newTask.trim()) { onAddTask(c.id, newTask); setNewTask(''); } };
            const linkify = (text) => { const urlRegex = /(https?:\/\/[^\s]+)/g; return text.split(urlRegex).map((part, i) => part.match(urlRegex) ? <a key={i} href={part} target="_blank" className="text-blue-600 underline break-all">{part}</a> : part); };
            
            // Count pending tasks
            const pendingTasks = c.tasks ? Object.values(c.tasks).filter(t => !t.completed).length : 0;

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                    <div className="bg-white w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row">
                        <div className="w-full md:w-1/3 bg-gray-50 p-6 border-l flex flex-col overflow-y-auto">
                            <div className="flex justify-between items-center mb-6">
                                <h3 className="font-bold text-lg">تعديل البيانات</h3>
                                <button onClick={onClose} className="md:hidden"><Icon name="X" /></button>
                            </div>
                            <div className="space-y-4 flex-1">
                                <div><label className="text-xs font-bold text-gray-500">الاسم</label><input className="w-full bg-white border p-2 rounded mt-1" value={d.name} onChange={e=>setD({...d, name:e.target.value})} /></div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500 flex justify-between">الجوال 
                                        <button onClick={() => openWhatsApp(d.phone)} className="text-green-600 text-[10px] flex items-center gap-1"><Icon name="MessageCircle" size={10}/> واتساب</button>
                                    </label>
                                    <input className="w-full bg-white border p-2 rounded mt-1 date-en" value={d.phone} onChange={e=>setD({...d, phone:e.target.value})} />
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500">المشروع</label>
                                    <select className="w-full bg-white border p-2 rounded mt-1" value={d.projectType} onChange={e=>setD({...d, projectType:e.target.value})}>
                                        {PROJECT_TYPES.map(t=><option key={t} value={t}>{t}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500">الخدمة</label>
                                    <select className="w-full bg-white border p-2 rounded mt-1" value={d.serviceType} onChange={e=>setD({...d, serviceType:e.target.value})}>
                                        {SERVICE_TYPES.map(t=><option key={t} value={t}>{t}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500">الحالة</label>
                                    <select className="w-full bg-white border p-2 rounded mt-1" value={d.status} onChange={e=>setD({...d, status:e.target.value})}>
                                        {STATUS_LIST.map(s=><option key={s.key} value={s.key}>{s.label}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500">مسند إلى</label>
                                    <select className="w-full bg-white border p-2 rounded mt-1" value={d.assignedTo} onChange={e=>setD({...d, assignedTo:e.target.value})}>
                                        <option value="">بدون إسناد</option>
                                        {users.map(u=><option key={u.id} value={u.name}>{u.name}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500">المصدر</label>
                                    <select className="w-full bg-white border p-2 rounded mt-1" value={d.source || ''} onChange={e=>setD({...d, source:e.target.value})}>
                                        <option value="">اختر المصدر</option>
                                        {CLIENT_SOURCES.map(s=><option key={s} value={s}>{s}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500 flex justify-between">رابط Drive <span className="text-red-500">*</span></label>
                                    <input className="w-full bg-white border p-2 rounded mt-1 text-left dir-ltr" value={d.driveLink} onChange={e=>setD({...d, driveLink:e.target.value})} />
                                </div>
                            </div>
                            <div className="mt-6 pt-4 border-t space-y-2">
                                <button onClick={saveAndClose} className="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 flex items-center justify-center gap-2"><Icon name="Save" size={16} /> حفظ وإغلاق</button>
                                <button onClick={onClose} className="w-full bg-gray-200 text-gray-800 py-2 rounded font-bold hover:bg-gray-300">إغلاق</button>
                            </div>
                        </div>

                        <div className="flex-1 bg-white flex flex-col h-full">
                            <div className="p-4 border-b flex justify-between items-center bg-gray-50">
                                <div className="flex gap-6">
                                    <button onClick={()=>setTab('chat')} className={`pb-1 ${tab==='chat'?'font-bold border-b-2 border-black text-black':'text-gray-400'}`}>الملاحظات</button>
                                    <button onClick={()=>setTab('tasks')} className={`pb-1 flex items-center gap-2 ${tab==='tasks'?'font-bold border-b-2 border-black text-black':'text-gray-400'}`}>
                                        المهام 
                                        {pendingTasks > 0 && <span className="bg-red-500 text-white text-[10px] px-1.5 rounded-full">{pendingTasks}</span>}
                                    </button>
                                </div>
                                <button onClick={onClose} className="hidden md:block"><Icon name="X" /></button>
                            </div>
                            
                            {tab === 'chat' ? (
                                <>
                                    <div className="flex-1 overflow-y-auto p-6 space-y-4 bg-[#f8f9fa]" ref={chatContainer}>
                                        {c.notes ? Object.values(c.notes).map((n, i) => (
                                            <div key={i} className={`flex flex-col ${n.author === (user.name || user.email) ? 'items-start' : 'items-end'}`}>
                                                <div className={`max-w-[80%] p-3 rounded-xl text-sm ${n.author === (user.name || user.email) ? 'bg-white border rounded-tr-none' : 'bg-blue-50 rounded-tl-none'}`}>
                                                    <div className="flex justify-between gap-4 mb-1 text-[10px] text-gray-400 border-b pb-1">
                                                        <span className="font-bold text-gray-600">{n.author}</span>
                                                        <span>{formatDate(n.timestamp)}</span>
                                                    </div>
                                                    <p className="whitespace-pre-wrap leading-relaxed">{linkify(n.text)}</p>
                                                </div>
                                            </div>
                                        )) : <div className="text-center text-gray-400 mt-20">لا توجد ملاحظات</div>}
                                    </div>
                                    <form onSubmit={send} className="p-4 border-t flex gap-2">
                                        <input className="flex-1 bg-gray-100 border-0 p-3 rounded-lg outline-none" placeholder="اكتب ملاحظة..." value={note} onChange={e=>setNote(e.target.value)} />
                                        <button disabled={!note.trim()} className="bg-black text-white p-3 rounded-lg hover:bg-gray-800"><Icon name="Send" className="rtl:rotate-180" /></button>
                                    </form>
                                </>
                            ) : (
                                <>
                                    <div className="flex-1 overflow-y-auto p-6 space-y-3">
                                        {c.tasks ? Object.entries(c.tasks).map(([tid, t]) => (
                                            <div key={tid} className="flex items-center gap-3 p-3 border rounded-xl hover:bg-gray-50 group transition">
                                                <button onClick={()=>onToggleTask(c.id, tid, t.completed)} className={`text-gray-400 hover:text-black ${t.completed ? 'text-green-500' : ''}`}>
                                                    <Icon name={t.completed ? "CheckSquare" : "Square"} />
                                                </button>
                                                <span className={`flex-1 text-sm ${t.completed ? 'line-through text-gray-400' : 'text-gray-800'}`}>{t.text}</span>
                                                <button onClick={()=>onDeleteTask(c.id, tid)} className="text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition"><Icon name="Trash2" size={16}/></button>
                                            </div>
                                        )) : <div className="text-center text-gray-400 mt-20">لا توجد مهام</div>}
                                    </div>
                                    <form onSubmit={submitTask} className="p-4 border-t flex gap-2">
                                        <input className="flex-1 bg-gray-100 border-0 p-3 rounded-lg outline-none" placeholder="أضف مهمة جديدة..." value={newTask} onChange={e=>setNewTask(e.target.value)} />
                                        <button disabled={!newTask.trim()} className="bg-black text-white p-3 rounded-lg hover:bg-gray-800"><Icon name="Plus" /></button>
                                    </form>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const Users = ({ users }) => {
            const [name, setName] = useState('');
            const [email, setEmail] = useState('');
            const [role, setRole] = useState('sales');
            const [editU, setEditU] = useState(null);

            const addUserProfile = (e) => {
                e.preventDefault();
                const newRef = window.dbPush(window.dbRef(window.db, 'users'));
                window.dbSet(newRef, { name, email, role });
                setName(''); setEmail('');
                alert('تم إضافة ملف الموظف.');
            };

            const deleteUser = (id) => {
                if(confirm('حذف المستخدم؟')) window.dbRemove(window.dbRef(window.db, `users/${id}`));
            };

            const updateUser = () => {
                if(editU) {
                    window.dbUpdate(window.dbRef(window.db, `users/${editU.id}`), { name: editU.name, role: editU.role });
                    setEditU(null);
                }
            };

            return (
                <div className="space-y-8 animate-fade-in">
                    <h2 className="text-2xl font-bold">إدارة المستخدمين</h2>
                    <div className="grid md:grid-cols-3 gap-8">
                        <div className="bg-white p-6 rounded-xl shadow-sm border h-fit">
                            <h3 className="font-bold mb-4">إضافة ملف موظف</h3>
                            <div className="bg-yellow-50 border border-yellow-200 text-yellow-800 text-xs p-3 rounded mb-4">
                                تنبيه هام: قم بإضافة إيميلات الموظفين هنا (مثل omar@truedraft.com.sa) ليتمكنوا من استخدام النظام بعد تسجيل دخولهم.
                            </div>
                            <form onSubmit={addUserProfile} className="space-y-3">
                                <div>
                                    <label className="text-sm font-bold mb-1 block">الاسم</label>
                                    <input required className="w-full border p-2 rounded focus:border-black outline-none" value={name} onChange={e=>setName(e.target.value)} />
                                </div>
                                <div>
                                    <label className="text-sm font-bold mb-1 block">البريد الإلكتروني</label>
                                    <input required type="email" className="w-full border p-2 rounded date-en focus:border-black outline-none" value={email} onChange={e=>setEmail(e.target.value)} />
                                </div>
                                <div>
                                    <label className="text-sm font-bold mb-1 block">الصلاحية</label>
                                    <select className="w-full border p-2 rounded bg-white" value={role} onChange={e=>setRole(e.target.value)}>
                                        <option value="sales">موظف مبيعات</option>
                                        <option value="admin">مدير</option>
                                    </select>
                                </div>
                                <button className="w-full bg-black text-white py-3 rounded font-bold hover:bg-gray-800">حفظ الملف</button>
                            </form>
                        </div>
                        <div className="md:col-span-2 bg-white rounded-xl shadow-sm border overflow-hidden">
                            <table className="w-full text-right">
                                <thead className="bg-gray-50 text-gray-500 font-bold">
                                    <tr><th className="p-4">الاسم</th><th className="p-4">البريد</th><th className="p-4">الصلاحية</th><th className="p-4">إجراء</th></tr>
                                </thead>
                                <tbody className="divide-y">
                                    {users.map(u => (
                                        <tr key={u.id}>
                                            <td className="p-4">{editU?.id === u.id ? <input className="border p-1 w-full" value={editU.name} onChange={e=>setEditU({...editU, name:e.target.value})} /> : u.name}</td>
                                            <td className="p-4 text-gray-500 date-en">{u.email}</td>
                                            <td className="p-4">
                                                {editU?.id === u.id ? 
                                                    <select className="border p-1" value={editU.role} onChange={e=>setEditU({...editU, role:e.target.value})}><option value="sales">موظف</option><option value="admin">مدير</option></select> 
                                                    : <span className={`px-2 py-1 rounded text-xs font-bold ${u.role==='admin'?'bg-purple-100 text-purple-700':'bg-blue-100 text-blue-700'}`}>{u.role==='admin'?'مدير':'موظف'}</span>
                                                }
                                            </td>
                                            <td className="p-4 flex gap-2">
                                                {editU?.id === u.id ? 
                                                    <button onClick={updateUser} className="text-green-600"><Icon name="Save" size={16}/></button> 
                                                    : <button onClick={()=>setEditU(u)} className="text-blue-500"><Icon name="Edit2" size={16}/></button>
                                                }
                                                <button onClick={()=>deleteUser(u.id)} className="text-red-400"><Icon name="Trash2" size={16}/></button>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        const Sidebar = ({ page, setPage, isOpen, setIsOpen }) => {
            const Link = ({ to, icon, label }) => (
                <button onClick={() => { setPage(to); if(window.innerWidth < 768) setIsOpen(false); }} className={`flex items-center gap-3 w-full p-3 rounded-lg transition ${page === to ? 'bg-white/10 text-white' : 'text-gray-400 hover:text-white'}`}>
                    <Icon name={icon} size={20} /> <span>{label}</span>
                </button>
            );
            return (
                <>
                    {isOpen && <div className="fixed inset-0 bg-black/50 z-20 md:hidden" onClick={() => setIsOpen(false)}></div>}
                    <aside className={`fixed md:relative z-30 bg-[#101414] text-white w-64 h-screen flex flex-col transition-transform duration-300 ${isOpen ? 'translate-x-0' : 'translate-x-full md:translate-x-0'}`}>
                        <div className="h-20 flex items-center justify-center border-b border-gray-800">
                            <img src="../logo.png" alt="True Draft" className="h-12 object-contain" />
                            <span className="font-bold text-xl hidden">True Draft</span>
                        </div>
                        <nav className="flex-1 p-4 space-y-2">
                            <Link to="dashboard" icon="LayoutDashboard" label="لوحة التحكم" />
                            <Link to="clients" icon="Users" label="العملاء" />
                        </nav>
                    </aside>
                </>
            );
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);
            const [page, setPage] = useState('dashboard');
            const [sidebarOpen, setSidebarOpen] = useState(false);
            
            const [clients, setClients] = useState([]);
            const [users, setUsers] = useState([]);

            useEffect(() => {
                const interval = setInterval(() => {
                    if (window.firebaseReady) {
                        clearInterval(interval);
                        const loader = document.getElementById('initial-loader');
                        if (loader) loader.style.display = 'none';

                        const unsub = window.authListener(window.auth, (u) => {
                            if (u) {
                                window.dbGet(window.dbRef(window.db, 'users')).then(snap => {
                                    const val = snap.val();
                                    const userList = val ? Object.keys(val).map(k => ({ id: k, ...val[k] })) : [];
                                    setUsers(userList);

                                    let currentUser = userList.find(x => x.email === u.email);
                                    
                                    if (u.email === ADMIN_EMAIL) {
                                        currentUser = { name: 'الملك', email: u.email, role: 'admin' };
                                    }

                                    if (currentUser) {
                                        setUser(currentUser);
                                    } else {
                                        setUser({ name: u.email.split('@')[0], email: u.email, role: 'sales' });
                                    }
                                    setLoading(false);
                                });

                                window.dbOnValue(window.dbRef(window.db, 'clients'), (s) => {
                                    const d = s.val();
                                    setClients(d ? Object.keys(d).map(k => ({ id: k, ...d[k] })).reverse() : []);
                                });
                                
                                window.dbOnValue(window.dbRef(window.db, 'users'), (s) => {
                                    const d = s.val();
                                    setUsers(d ? Object.keys(d).map(k => ({ id: k, ...d[k] })) : []);
                                });

                            } else {
                                setUser(null);
                                setLoading(false);
                            }
                        });
                    }
                }, 100);

                return () => clearInterval(interval);
            }, []);

            if (loading) return <div className="h-screen flex items-center justify-center"></div>;

            if (!user) return <Login />;

            return (
                <div className="flex min-h-screen" dir="rtl">
                    <Sidebar page={page} setPage={setPage} isOpen={sidebarOpen} setIsOpen={setSidebarOpen} />
                    <div className="flex-1 flex flex-col min-w-0 overflow-hidden h-screen">
                        
                        {/* New Header Logic per user request */}
                        <header className="bg-white h-20 border-b flex items-center justify-between px-6 shrink-0 shadow-sm z-20">
                            
                            <div className="flex items-center gap-4">
                                <button className="md:hidden" onClick={() => setSidebarOpen(true)}><Icon name="Menu" /></button>
                                
                                <button onClick={() => window.authSignOut(window.auth)} className="bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-red-100 transition">
                                    <Icon name="LogOut" size={18} /> خروج
                                </button>

                                {user.role === 'admin' && (
                                    <button 
                                        onClick={() => setPage('users')} 
                                        className={`px-5 py-2 rounded-lg font-bold flex items-center gap-2 transition shadow-sm ${page === 'users' ? 'bg-black text-white ring-2 ring-offset-2 ring-black' : 'bg-slate-800 text-white hover:bg-slate-900'}`}
                                    >
                                        <Icon name="Users" size={18} /> إدارة الموظفين
                                    </button>
                                )}
                            </div>

                            <div className="flex items-center gap-4">
                                <div className="text-left">
                                    <div className="text-xl font-bold flex items-center gap-2 justify-end">
                                        {user.name} <span className="text-2xl">👋</span>
                                    </div>
                                    <div className="text-xs text-gray-500 font-bold uppercase tracking-wider text-right">
                                        {user.role === 'admin' ? 'لوحة تحكم المدير العام' : 'نظام المبيعات والمشاريع'}
                                    </div>
                                </div>
                            </div>
                        </header>

                        <main className="flex-1 overflow-y-auto p-6 bg-[#f3f4f6]">
                            {page === 'dashboard' && <Dashboard clients={clients} />}
                            {page === 'clients' && <Clients clients={clients} users={users} user={user} />}
                            {page === 'users' && <Users users={users} />}
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>فهمت، يبدو أن هناك مشكلة في دمج النصوص الطويلة، وربما بعض الأخطاء في إغلاق الـ HTML Tags.

سأقوم الآن بتحديث الأكواد لجميع الملفات الثلاثة (`index.html`, `projects.html`, `blog.html`) لتضم:
1.  **الهيدر والفوتر الكاملين والمدمجين** (بما في ذلك جميع المودالز والنصوص القانونية الكاملة، ورمز الواتساب).
2.  **تصحيح أي أخطاء إملائية أو تنسيقية** في النصوص القانونية.
3.  **ترتيب وتنظيف الكود** ليعمل بشكل سليم ومستقل.

**هذه الأكواد ستكون نهائية ومصححة بالكامل.**

**المطلوب منك:**
1.  **حذف ملفات `header.html`، `footer.html`، و `js/main.js` نهائياً.**
2.  **استبدال محتوى ملفات `index.html`، `projects.html`، و `blog.html` بالأكواد الجديدة أدناه بالكامل.**

### 1. `index.html` (الصفحة الرئيسية)

```html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>True Draft | ترو درفت - تصميم وبناء</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { dark: '#050505' },
                    fontFamily: { sans: ['Cairo', 'sans-serif'], english: ['Manrope', 'sans-serif'] }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;700;900&family=Manrope:wght@200;300;400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; } 
        .animate-fade-in { animation: fadeIn 0.3s ease-in-out; } 
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } 
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1.5s ease-in-out; z-index: 0; } 
        .slide.active { opacity: 1; z-index: 1; }
        /* Style for scrollable modals */
        .modal-content-scroll::-webkit-scrollbar { width: 6px; }
        .modal-content-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .modal-content-scroll::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
        .modal-content-scroll::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body class="bg-white text-black antialiased flex flex-col min-h-screen">

    <!-- Header (Integrated) -->
    <nav class="fixed top-0 w-full z-[999] bg-white/95 backdrop-blur-md border-b border-gray-100 py-4 shadow-sm transition-all duration-300">
        <div class="container mx-auto px-6 md:px-12 flex justify-between items-center">
            <a href="index.html" class="z-50 block"><img src="images/logo.png" alt="True Draft" class="h-10 md:h-12 w-auto object-contain"></a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="text-sm font-bold uppercase text-[#C69C6D] underline decoration-2 underline-offset-4" data-i18n="home">الرئيسية</a>
                <a href="index.html#about" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="about">عن ترو درفت</a>
                <a href="projects.html" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="projects">مشاريعنا</a>
                <a href="blog.html" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="blog">المدونة</a>
                <button onclick="openModal('careers-modal')" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="careers">التوظيف</button>
                <button onclick="openModal('contact-modal')" class="text-sm font-bold uppercase hover:text-[#C69C6D] transition-colors" data-i18n="contact">تواصل معنا</button>
                <button onclick="toggleLanguage()" class="flex items-center gap-2 text-xs font-bold border-l rtl:border-l-0 rtl:border-r border-gray-300 px-4 h-5 hover:opacity-70">
                    <span class="font-english text-base" id="lang-btn-text">EN</span>
                </button>
            </div>
    
            <!-- Mobile Menu Button -->
            <button onclick="toggleMenu()" class="md:hidden p-2.5 rounded-md border border-gray-200 hover:bg-gray-50 transition-all">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
        </div>
    
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="fixed inset-0 bg-white z-[5000] hidden flex-col justify-center items-center gap-8 text-center animate-fade-in w-full h-screen overflow-hidden">
            <button onclick="toggleMenu()" class="absolute top-6 right-6 p-2 rounded-full border hover:bg-gray-100 rtl:right-auto rtl:left-6 ltr:left-auto ltr:right-6">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <a href="index.html" onclick="toggleMenu()" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="home">الرئيسية</a>
            <a href="index.html#about" onclick="toggleMenu()" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="about">عن ترو درفت</a>
            <a href="projects.html" onclick="toggleMenu()" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="projects">مشاريعنا</a>
            <a href="blog.html" onclick="toggleMenu()" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="blog">المدونة</a>
            <button onclick="toggleMenu(); openModal('careers-modal')" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="careers">التوظيف</button>
            <button onclick="toggleMenu(); openModal('contact-modal')" class="text-2xl font-bold text-black hover:text-[#C69C6D] transition-colors" data-i18n="contact">تواصل معنا</button>
            
            <button onclick="toggleMenu(); toggleLanguage()" class="text-xl font-english mt-8 font-bold border-2 border-black text-black px-8 py-3 rounded-full hover:bg-black hover:text-white transition-all">
                EN / AR
            </button>
        </div>
    </nav>
    
    <main class="flex-grow pt-[80px]">
        <!-- Slider Section -->
        <section id="home" class="container mx-auto px-4 md:px-8 mb-16">
            <div class="relative h-[75vh] md:h-[85vh] w-full overflow-hidden bg-gray-100 shadow-lg group">
                <div id="slider-container" class="absolute inset-0 w-full h-full"></div>
                <!-- Slider Controls -->
                <div class="absolute bottom-6 left-6 rtl:left-auto rtl:right-6 z-20 flex gap-2">
                    <button onclick="prevSlide()" class="w-12 h-12 flex items-center justify-center rounded-full border border-white/30 bg-black/20 backdrop-blur-md text-white hover:bg-white hover:text-black transition-all">
                        <svg class="w-5 h-5 rtl:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <button onclick="nextSlide()" class="w-12 h-12 flex items-center justify-center rounded-full border border-white/30 bg-black/20 backdrop-blur-md text-white hover:bg-white hover:text-black transition-all">
                        <svg class="w-5 h-5 rtl:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 md:py-24 bg-white">
            <div class="container mx-auto px-6 md:px-12">
                <div class="max-w-4xl border-l-4 rtl:border-l-0 rtl:border-r-4 border-black pl-8 rtl:pl-0 rtl:pr-8 mb-16">
                    <h2 class="text-sm font-bold tracking-[0.2em] mb-4 uppercase text-gray-500 font-english" data-i18n="about_title">About True Draft</h2>
                    <p class="text-2xl md:text-4xl font-light leading-relaxed" data-i18n="about_text">تأسست True Draft على مبدأ أن كل مشروع مميز يبدأ من مسودة حقيقية… مسودة دقيقة، صادقة، وواضحة الاتجاه. نحن نصنع مشاريع تُبنى على رؤية أصلية لا تنحرف، وتفاصيل تُصاغ بعناية منذ اللحظة الأولى وحتى اكتمال التنفيذ.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="p-8 border border-gray-200 hover:border-black transition-colors duration-500">
                        <h3 class="text-xl font-bold mb-4" data-i18n="vision_title">رؤيتنا</h3>
                        <p class="text-gray-600 leading-7" data-i18n="vision_text">أن نكون مرجعاً في صناعة التصميم والبناء، حيث تبدأ المشاريع من أساس صحيح وتكتمل بمعايير عالية تعكس أصالة الفكرة الأولى.</p>
                    </div>
                    <div class="p-8 border border-gray-200 hover:border-black transition-colors duration-500">
                        <h3 class="text-xl font-bold mb-4" data-i18n="mission_title">رسالتنا</h3>
                        <p class="text-gray-600 leading-7" data-i18n="mission_text">تقديم رحلة تصميم وبناء شفافة ومدروسة، نحافظ فيها على روح المشروع منذ مخططه الأول وحتى تسليمه كمنجز متقن ورفيع.</p>
                    </div>
                    <div class="p-8 border border-gray-200 hover:border-black transition-colors duration-500">
                        <h3 class="text-xl font-bold mb-4" data-i18n="goal_title">هدفنا</h3>
                        <p class="text-gray-600 leading-7" data-i18n="goal_text">صياغة حلول تصميم وبناء ترتكز على فكرة نقيّة وخطة محكمة، لتتحول إلى واقع يحمل نفس صدق وجودة المسودة الأولى.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer (Integrated) -->
    <div class="fixed bottom-8 right-8 rtl:right-8 rtl:left-auto ltr:left-8 ltr:right-auto z-[3000]">
        <a href="https://wa.me/966582226234" target="_blank" class="flex items-center justify-center w-16 h-16 bg-[#25D366] rounded-full shadow-2xl hover:scale-110 transition-transform duration-300 group">
            <svg class="w-8 h-8 text-white fill-current group-hover:animate-pulse" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
        </a>
    </div>

    <footer class="bg-black text-white py-16">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-white" data-i18n="contact_header">تواصل معنا</h2>
            
            <div class="flex flex-col md:flex-row justify-center gap-12 md:gap-32 mb-12">
                <div class="flex flex-col items-center">
                    <span class="text-gray-400 text-xs mb-2 font-bold uppercase tracking-widest" data-i18n="email_label">البريد الإلكتروني</span>
                    <a href="mailto:info@truedraft.com.sa" class="text-xl md:text-2xl font-english font-light hover:text-gray-300 transition-colors">info@truedraft.com.sa</a>
                </div>
                <div class="flex flex-col items-center">
                    <span class="text-gray-400 text-xs mb-2 font-bold uppercase tracking-widest" data-i18n="phone_label">اتصل بنا</span>
                    <a href="tel:0582226234" class="text-xl md:text-2xl font-english font-light hover:text-gray-300 transition-colors" dir="ltr">058 222 6234</a>
                </div>
            </div>

            <div class="flex justify-center gap-8 mb-16">
                <a href="https://tiktok.com/@truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.63 2.58-4.9 2.09-1.81 5.13-2.01 7.41-.47.23.15.42.34.61.53v4.43c-.87-.91-2.17-1.35-3.41-1.15-1.11.16-2.04.91-2.48 1.92-.76 1.76-.08 3.97 1.63 5.09.84.56 1.86.76 2.84.62 1.39-.17 2.63-1.04 3.23-2.29.35-.72.49-1.52.48-2.32v-17.2h-1.9z"/></svg></a>
                <a href="https://instagram.com/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a>
                <a href="https://linkedin.com/company/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a>
                <a href="https://x.com/truedraft_sa" target="_blank" class="text-white hover:text-gray-400 transition-colors transform hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
            </div>

            <div class="border-t border-gray-900 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-gray-600 text-xs font-bold" data-i18n="rights">جميع الحقوق محفوظة لشركة True Draft © 2025</p>
                <div class="flex gap-6">
                    <button onclick="openModal('privacy-modal')" class="text-gray-500 text-xs hover:text-white transition-colors" data-i18n="privacy">سياسة الخصوصية</button>
                    <button onclick="openModal('terms-modal')" class="text-gray-500 text-xs hover:text-white transition-colors" data-i18n="terms">الشروط والأحكام</button>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Modals (Integrated - ALL MODALS) -->
    <div id="careers-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-2xl bg-white border border-gray-200 shadow-2xl relative p-8 md:p-12 rounded-xl">
                <button onclick="closeModal('careers-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-3xl font-bold mb-2 text-center" data-i18n="careers_title">انضم إلى فريقنا</h2>
                <p class="text-center text-gray-500 mb-8 text-sm" data-i18n="careers_subtitle">املأ النموذج أدناه وسيتم إرسال طلبك مباشرة إلى فريق الموارد البشرية.</p>
                <form onsubmit="submitCareerForm(event)" class="space-y-5">
                    <div>
                        <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_name">الاسم الكامل</label>
                        <input type="text" id="career-name" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_phone">رقم الجوال</label>
                            <input type="tel" id="career-phone" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md" dir="ltr">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_email">البريد الإلكتروني</label>
                            <input type="email" id="career-email" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md" dir="ltr">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase mb-2 tracking-wider" data-i18n="form_position">المسمى الوظيفي</label>
                        <select id="career-position" required class="w-full p-3 bg-gray-50 border border-gray-200 focus:border-black outline-none rounded-md">
                            <option value="" disabled selected data-i18n="select_position">اختر التخصص...</option>
                            <option value="Architect">مهندس معماري (Architect)</option>
                            <option value="Interior Designer">مصمم داخلي (Interior Designer)</option>
                            <option value="Civil Engineer">مهندس مدني (Civil Engineer)</option>
                            <option value="Project Manager">مدير مشاريع (Project Manager)</option>
                            <option value="Site Engineer">مهندس موقع (Site Engineer)</option>
                            <option value="Administrative">إداري / سكرتارية (Admin)</option>
                        </select>
                    </div>
                    <button type="submit" class="w-full bg-black text-white font-bold py-4 hover:opacity-80 transition-opacity uppercase tracking-widest mt-4 rounded-md" data-i18n="form_send_app">إرسال الطلب</button>
                </form>
            </div>
        </div>
    </div>
    <div id="contact-modal" class="hidden fixed inset-0 z-[5000] bg-black/80 backdrop-blur-sm overflow-y-auto animate-fade-in">
        <div class="min-h-screen flex items-center justify-center p-6">
            <div class="w-full max-w-4xl bg-white border border-gray-200 shadow-2xl relative p-10 md:p-16 rounded-xl">
                <button onclick="closeModal('contact-modal')" class="absolute top-6 left-6 rtl:left-6 rtl:right-auto p-2 border rounded-full hover:bg-black hover:text-white transition-colors ltr:left-auto ltr:right-6">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <div class="grid md:grid-cols-2 gap-12">
                    <div class="flex flex-col justify-center bg-black text-white p-8 rounded-xl">
                        <h2 class="text-3xl font-bold mb-8" data-i18n="contact_header">تواصل معنا</h2>
                        <div class="space-y-6">
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="phone_label">الهاتف</h4><a href="tel:0582226234" class="text-xl font-english font-light hover:underline" dir="ltr">058 222 6234</a></div>
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="email_label">البريد الإلكتروني</h4><a href="mailto:info@truedraft.com.sa" class="text-lg font-english font-light hover:underline">info@truedraft.com.sa</a></div>
                            <div><h4 class="text-xs uppercase tracking-widest opacity-70 mb-1" data-i18n="location_label">الموقع
