<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المدونة | True Draft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: { colors: { dark: '#050505' }, fontFamily: { sans: ['Cairo', 'sans-serif'], english: ['Manrope', 'sans-serif'] } }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;700;900&family=Manrope:wght@200;300;400;500;700;800&display=swap" rel="stylesheet">
    <style>body { font-family: 'Cairo', sans-serif; } .animate-fade-in { animation: fadeIn 0.3s ease-in-out; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }</style>
</head>
<body class="bg-white text-black antialiased flex flex-col min-h-screen">

    <div id="header-placeholder"></div>

    <main class="flex-grow pt-[100px] px-6 pb-20">
        <div class="container mx-auto max-w-6xl">
            <h1 class="text-4xl font-bold mb-12 border-b pb-6" data-i18n="blog_title">المدونة</h1>
            <div id="blog-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-10"></div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <!-- Blog Detail Modal -->
    <div id="blog-detail-view" class="hidden fixed inset-0 z-[2050] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-4xl max-h-[90vh] rounded-xl overflow-y-auto relative">
            <button onclick="closeBlogDetail()" class="sticky top-4 left-4 z-50 bg-white rounded-full p-2 shadow"><svg width="24" height="24" fill="none" stroke="black" stroke-width="2" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg></button>
            <div class="h-64 w-full relative"><img id="blog-img" src="" class="w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div><div class="absolute bottom-6 right-6 text-white"><span id="blog-cat" class="bg-[#C69C6D] text-black px-2 py-1 text-xs font-bold mb-2 inline-block"></span><p id="blog-date" class="text-xs opacity-80"></p></div></div>
            <div class="p-8 md:p-12"><h1 id="blog-title" class="text-3xl font-bold mb-6"></h1><div id="blog-content" class="prose prose-lg max-w-none text-gray-700 leading-loose"></div></div>
        </div>
    </div>

    <script>
        const posts = [
            { id: 1, title: 'دليل حساب تكلفة تشطيب فيلا 2025', category: 'مقاولات', date: '15 JAN 2025', image: 'images/blog1.jpg', content: '<p>تفاصيل المقال...</p>' },
            { id: 2, title: 'الفرق بين المودرن والنيو كلاسيك', category: 'تصميم', date: '10 JAN 2025', image: 'images/blog2.jpg', content: '<p>تفاصيل المقال...</p>' },
            { id: 3, title: 'أخطاء كارثية عند اختيار المقاول', category: 'نصائح', date: '05 JAN 2025', image: 'images/blog3.jpg', content: '<p>تفاصيل المقال...</p>' }
        ];

        let currentLang = localStorage.getItem('lang') || 'ar';
        const translations = {
            ar: { blog_title: 'المدونة', home: 'الرئيسية', about: 'عن ترو درفت', projects: 'مشاريعنا', blog: 'المدونة', contact: 'تواصل معنا', careers: 'التوظيف', contact_header: 'تواصل معنا', email_label: 'البريد الإلكتروني', phone_label: 'اتصل بنا', location_label: 'الموقع', location_val: 'الرياض، المملكة العربية السعودية', rights: 'جميع الحقوق محفوظة لشركة True Draft © 2025', privacy: 'سياسة الخصوصية', terms: 'الشروط والأحكام', careers_title: 'انضم إلى فريقنا', careers_subtitle: 'املأ النموذج أدناه...', form_name: 'الاسم', form_phone: 'رقم الجوال', form_email: 'البريد الإلكتروني', form_position: 'المسمى الوظيفي', form_message: 'الرسالة', form_send: 'إرسال', form_send_app: 'إرسال الطلب', select_position: 'اختر التخصص...', privacy_intro: 'مقدمة:', privacy_text_1: '...', terms_intro: 'مقدمة:', terms_text_1: '...' },
            en: { blog_title: 'Blog', home: 'Home', about: 'About Us', projects: 'Projects', blog: 'Blog', contact: 'Contact', careers: 'Careers', contact_header: 'Get in Touch', email_label: 'Email', phone_label: 'Call Us', location_label: 'Location', location_val: 'Riyadh, Saudi Arabia', rights: 'All rights reserved True Draft © 2025', privacy: 'Privacy Policy', terms: 'Terms & Conditions', careers_title: 'Join Our Team', careers_subtitle: 'Fill the form below...', form_name: 'Name', form_phone: 'Mobile', form_email: 'Email', form_position: 'Position', form_message: 'Message', form_send: 'Send', form_send_app: 'Submit Application', select_position: 'Select Position...', privacy_intro: 'Introduction:', privacy_text_1: '...', terms_intro: 'Introduction:', terms_text_1: '...' }
        };

        async function loadSharedComponents() {
            try {
                const headerRes = await fetch('header.html');
                document.getElementById('header-placeholder').innerHTML = await headerRes.text();
                const footerRes = await fetch('footer.html');
                document.getElementById('footer-placeholder').innerHTML = await footerRes.text();
                applyLanguage();
            } catch (e) { console.error(e); }
        }

        function applyLanguage() {
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.body.style.fontFamily = currentLang === 'ar' ? "'Cairo', sans-serif" : "'Manrope', sans-serif";
            const btnText = document.getElementById('lang-btn-text');
            if(btnText) btnText.textContent = currentLang === 'ar' ? 'EN' : 'عربي';
            document.querySelectorAll('[data-i18n]').forEach(el => { const k=el.getAttribute('data-i18n'); if(translations[currentLang][k]) el.textContent=translations[currentLang][k]; });
        }
        function toggleLanguage() { currentLang = currentLang === 'ar' ? 'en' : 'ar'; localStorage.setItem('lang', currentLang); applyLanguage(); }

        function render() {
            const grid = document.getElementById('blog-grid');
            grid.innerHTML = posts.map(p => `
                <article class="cursor-pointer group" onclick="openBlog(${p.id})">
                    <div class="h-64 bg-gray-200 overflow-hidden relative rounded-md mb-4"><img src="${p.image}" class="w-full h-full object-cover transition duration-500 group-hover:scale-105"><div class="absolute top-4 right-4 bg-white px-3 py-1 text-xs font-bold shadow-sm">${p.date}</div></div>
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest">${p.category}</span>
                    <h3 class="text-2xl font-bold mt-2 mb-2 group-hover:underline">${p.title}</h3>
                    <span class="text-xs font-bold border-b border-black">اقرأ المزيد</span>
                </article>
            `).join('');
        }

        function openBlog(id) {
            const p = posts.find(x => x.id === id); if(!p) return;
            document.getElementById('blog-title').textContent = p.title;
            document.getElementById('blog-cat').textContent = p.category;
            document.getElementById('blog-date').textContent = p.date;
            document.getElementById('blog-img').src = p.image;
            document.getElementById('blog-content').innerHTML = p.content;
            document.getElementById('blog-detail-view').classList.remove('hidden');
        }
        function closeBlogDetail() { document.getElementById('blog-detail-view').classList.add('hidden'); }

        // Shared Globals
        window.openModal = (id) => { document.getElementById(id).classList.remove('hidden'); document.body.style.overflow = 'hidden'; };
        window.closeModal = (id) => { document.getElementById(id).classList.add('hidden'); document.body.style.overflow = 'auto'; };
        window.toggleMenu = () => { const m=document.getElementById('mobile-menu'); m.classList.toggle('hidden'); m.classList.toggle('flex'); };
        window.submitCareerForm = (e) => { e.preventDefault(); const n=document.getElementById('career-name').value; window.location.href=`mailto:hr@truedraft.com.sa?subject=Job Application: ${n}`; };
        window.submitContactForm = (e) => { e.preventDefault(); const n=document.getElementById('contact-name').value; window.location.href=`mailto:info@truedraft.com.sa?subject=Contact: ${n}`; };
        window.toggleLanguage = toggleLanguage;

        document.addEventListener('DOMContentLoaded', () => { loadSharedComponents(); render(); });
    </script>
</body>
</html>
